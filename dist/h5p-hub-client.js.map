{"version":3,"sources":["webpack:///webpack/bootstrap d9d2a87e4fa359d005e7","webpack:///./src/entries/dist.js","webpack:///./src/styles/main.scss","webpack:///./src/scripts/hub.js","webpack:///./src/scripts/hub-view.js","webpack:///./~/h5p-sdk/src/scripts/components/panel.js","webpack:///./~/h5p-sdk/src/scripts/utils/elements.js","webpack:///./~/h5p-sdk/src/scripts/utils/functional.js","webpack:///./~/h5p-sdk/src/scripts/components/tab-panel.js","webpack:///./src/scripts/content-type-section/content-type-section.js","webpack:///./src/scripts/content-type-section/content-type-section-view.js","webpack:///./src/scripts/mixins/eventful.js","webpack:///./src/scripts/search-service/search-service.js","webpack:///./src/scripts/hub-services.js","webpack:///./~/lunr/lunr.js","webpack:///./src/scripts/content-type-list/content-type-list.js","webpack:///./src/scripts/content-type-list/content-type-list-view.js","webpack:///./src/scripts/content-type-detail/content-type-detail.js","webpack:///./src/scripts/content-type-detail/content-type-detail-view.js","webpack:///./src/scripts/upload-section/upload-section.js"],"names":["require","H5P","HubClient","default","Hub","state","contentTypeSection","uploadSection","view","sectionId","services","apiRootUrl","propagate","on","setPanelTitle","closePanel","resize","initTabPanel","id","contentType","getContentType","then","title","setTitle","tabConfigs","content","getElement","selected","forEach","addTab","tabConfig","ATTRIBUTE_ARIA_EXPANDED","isExpanded","HubView","renderTabPanel","renderPanel","titleElement","setAttribute","innerHTML","bodyElement","style","height","scrollHeight","expanded","document","createElement","className","toString","appendChild","tabContainerElement","rootElement","tablist","tabListWrapper","tabId","tabPanelId","tab","tabPanel","init","hide","show","toggleBodyVisibility","onAriaExpandedChange","event","target","element","titleEl","querySelector","bodyId","getAttribute","bodyEl","observer","MutationObserver","observe","attributes","attributeOldValue","attributeFilter","addEventListener","name","el","value","removeAttribute","hasAttribute","attributeEquals","toggleAttribute","parent","child","selector","querySelectorAll","curry","fn","arity","length","f1","args","Array","prototype","slice","call","arguments","apply","f2","args2","concat","compose","fns","reduce","f","g","arr","map","filter","some","contains","indexOf","without","values","inverseBooleanString","bool","hideAll","unSelectAll","tabs","tabPanels","ContentTypeSection","searchService","contentTypeList","contentTypeDetail","addMenuItem","menuText","search","applySearchFilter","showDetailView","closeDetailView","initContentTypeList","update","contentTypes","query","console","debug","loadById","fire","ContentBrowserView","menu","createMenuElement","inputGroup","createInputGroupElement","menuGroup","text","menuBarElement","childElementCount","navElement","inputField","inputButton","inputGroupWrapper","Eventful","listeners","type","listener","scope","trigger","push","triggers","every","types","eventful","self","findContentTypeById","SearchService","index","field","boost","ref","addToIndex","bind","add","summary","result","HubServices","window","cachedContentTypes","fetch","method","credentials","json","libraries","ContentTypeList","updateList","ATTRIBUTE_CONTENT_TYPE_ID","relayClickEventAs","preventDefault","ContentTypeListView","firstChild","removeChild","renderContentTypeList","renderContentTypeRow","image","icon","button","description","row","ContentTypeDetail","install","installContentType","setId","setDescription","setImage","ContentTypeDetailView","imageElement","backButtonElement","descriptioneElement","demoButton","useButton","installButton","licencePanel","createPanel","pluginsPanel","publisherPanel","panelGroupElement","body","headerEl","bodyInnerEl","panelEl","src","UploadSection"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;ACtCA,oBAAAA,CAAQ,CAAR;;AAEA;AACAC,OAAMA,OAAO,EAAb;AACAA,KAAIC,SAAJ,GAAgB,mBAAAF,CAAQ,CAAR,EAA0BG,OAA1C,C;;;;;;ACJA,+D;;;;;;;;;;;;;;;;ACAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;;;;;;;AAOA;;;;KAIqBC,G;AACnB;;;AAGA,gBAAYC,KAAZ,EAAmB;AAAA;;AACjB;AACA,cAAc,IAAd,EAAoB,yBAApB;;AAEA;AACA,UAAKC,kBAAL,GAA0B,iCAAuBD,KAAvB,CAA1B;AACA,UAAKE,aAAL,GAAqB,4BAAkBF,KAAlB,CAArB;;AAEA;AACA,UAAKG,IAAL,GAAY,sBAAY;AACtBC,kBAAW;AADW,MAAZ,CAAZ;;AAIA;AACA,UAAKC,QAAL,GAAgB,0BAAgB;AAC9BC,mBAAYN,MAAMM;AADY,MAAhB,CAAhB;;AAIA;AACA,UAAKC,SAAL,CAAe,CAAC,QAAD,EAAW,QAAX,CAAf,EAAqC,KAAKN,kBAA1C;;AAEA;AACA,UAAKO,EAAL,CAAQ,QAAR,EAAkB,KAAKC,aAAvB,EAAsC,IAAtC;AACA,UAAKD,EAAL,CAAQ,QAAR,EAAkB,KAAKL,IAAL,CAAUO,UAA5B,EAAwC,KAAKP,IAA7C;AACA,UAAKK,EAAL,CAAQ,QAAR,EAAkB,KAAKL,IAAL,CAAUQ,MAA5B,EAAoC,KAAKR,IAAzC;;AAEA,UAAKS,YAAL;AACD;;AAED;;;;;;;;;oCAKeC,E,EAAI;AACjB,cAAO,KAAKR,QAAL,CAAcS,WAAd,CAA0BD,EAA1B,CAAP;AACD;;AAED;;;;;;;;yCAKoB;AAAA;;AAAA,WAALA,EAAK,QAALA,EAAK;;AAClB,YAAKE,cAAL,CAAoBF,EAApB,EAAwBG,IAAxB,CAA6B;AAAA,aAAEC,KAAF,SAAEA,KAAF;AAAA,gBAAa,MAAKd,IAAL,CAAUe,QAAV,CAAmBD,KAAnB,CAAb;AAAA,QAA7B;AACD;;AAED;;;;;;oCAGe;AAAA;;AACb,WAAME,aAAa,CAAC;AAClBF,gBAAO,gBADW;AAElBJ,aAAI,gBAFc;AAGlBO,kBAAS,KAAKnB,kBAAL,CAAwBoB,UAAxB,EAHS;AAIlBC,mBAAU;AAJQ,QAAD,EAMnB;AACEL,gBAAO,QADT;AAEEJ,aAAI,gBAFN;AAGEO,kBAAS,KAAKlB,aAAL,CAAmBmB,UAAnB;AAHX,QANmB,CAAnB;;AAYAF,kBAAWI,OAAX,CAAmB;AAAA,gBAAa,OAAKpB,IAAL,CAAUqB,MAAV,CAAiBC,SAAjB,CAAb;AAAA,QAAnB;AACA,YAAKtB,IAAL,CAAUS,YAAV;AACD;;AAED;;;;;;;;kCAKa;AACX,cAAO,KAAKT,IAAL,CAAUkB,UAAV,EAAP;AACD;;;;;;mBA9EkBtB,G;;;;;;;;;;;;;;ACjBrB;;;;AACA;;;;AACA;;;;;;AAEA;;;;AAIA,KAAM2B,0BAA0B,eAAhC;;AAEA;;;AAGA,KAAMC,aAAa,+BAAgBD,uBAAhB,EAAyC,MAAzC,CAAnB;;AAEA;;;;KAGqBE,O;AACnB;;;AAGA,oBAAY5B,KAAZ,EAAmB;AAAA;;AACjB,UAAK6B,cAAL,CAAoB7B,KAApB;AACA,UAAK8B,WAAL,CAAiB9B,KAAjB;AACD;;AAED;;;;;;;kCAGa;AACX,YAAK+B,YAAL,CAAkBC,YAAlB,CAA+B,eAA/B,EAAgD,OAAhD;AACD;;AAED;;;;;;;;8BAKSf,K,EAAO;AACd,YAAKc,YAAL,CAAkBE,SAAlB,GAA8BhB,KAA9B;AACD;;AAED;;;;;;8BAGQ;AACN,WAAGU,WAAW,KAAKI,YAAhB,CAAH,EAAkC;AAChC,cAAKG,WAAL,CAAiBC,KAAjB,CAAuBC,MAAvB,GAAmC,KAAKF,WAAL,CAAiBG,YAApD;AACD;AACF;;AAED;;;;;;;;;;uCAOkD;AAAA,WAArCpB,KAAqC,QAArCA,KAAqC;AAAA,WAA9Bb,SAA8B,QAA9BA,SAA8B;AAAA,gCAAnBkC,QAAmB;AAAA,WAAnBA,QAAmB,iCAAR,KAAQ;;AAChD;;;AAGA,YAAKP,YAAL,GAAoBQ,SAASC,aAAT,CAAuB,KAAvB,CAApB;AACA,YAAKT,YAAL,CAAkBU,SAAlB,IAA+B,4BAA/B;AACA,YAAKV,YAAL,CAAkBC,YAAlB,CAA+B,eAA/B,EAAgDM,SAASI,QAAT,EAAhD;AACA,YAAKX,YAAL,CAAkBC,YAAlB,CAA+B,eAA/B,kBAA8D5B,SAA9D;AACA,YAAK2B,YAAL,CAAkBE,SAAlB,GAA8BhB,SAAS,EAAvC;;AAEA;;;AAGA,YAAKiB,WAAL,GAAmBK,SAASC,aAAT,CAAuB,KAAvB,CAAnB;AACA,YAAKN,WAAL,CAAiBO,SAAjB,IAA8B,YAA9B;AACA,YAAKP,WAAL,CAAiBF,YAAjB,CAA8B,aAA9B,EAA6C,CAAC,CAACM,QAAF,EAAYI,QAAZ,EAA7C;AACA,YAAKR,WAAL,CAAiBrB,EAAjB,mBAAoCT,SAApC;AACA,YAAK8B,WAAL,CAAiBS,WAAjB,CAA6B,KAAKC,mBAAlC;AACA,WAAG,CAACN,QAAJ,EAAa;AACX,cAAKJ,WAAL,CAAiBC,KAAjB,CAAuBC,MAAvB,GAAgC,GAAhC;AACD;;AAED;;;AAGA,YAAKS,WAAL,GAAmBN,SAASC,aAAT,CAAuB,KAAvB,CAAnB;AACA,YAAKK,WAAL,CAAiBJ,SAAjB,6BAAqDrC,SAArD;AACA,YAAKyC,WAAL,CAAiBF,WAAjB,CAA6B,KAAKZ,YAAlC;AACA,YAAKc,WAAL,CAAiBF,WAAjB,CAA6B,KAAKT,WAAlC;;AAEA,4BAAU,KAAKW,WAAf;AACD;;AAED;;;;;;sCAGiB;AACf;;;AAGA,YAAKC,OAAL,GAAeP,SAASC,aAAT,CAAuB,IAAvB,CAAf;AACA,YAAKM,OAAL,CAAaL,SAAb,IAA0B,SAA1B;AACA,YAAKK,OAAL,CAAad,YAAb,CAA2B,MAA3B,EAAmC,SAAnC;;AAEA;;;AAGA,YAAKe,cAAL,GAAsBR,SAASC,aAAT,CAAuB,KAAvB,CAAtB;AACA,YAAKO,cAAL,CAAoBJ,WAApB,CAAgC,KAAKG,OAArC;;AAEA;;;AAGA,YAAKF,mBAAL,GAA2BL,SAASC,aAAT,CAAuB,KAAvB,CAA3B;AACA,YAAKI,mBAAL,CAAyBH,SAAzB,IAAsC,WAAtC;AACA,YAAKG,mBAAL,CAAyBD,WAAzB,CAAqC,KAAKI,cAA1C;AACD;;AAED;;;;;;;;;;;mCAQ+C;AAAA,WAAvC9B,KAAuC,SAAvCA,KAAuC;AAAA,WAAhCJ,EAAgC,SAAhCA,EAAgC;AAAA,WAA5BO,OAA4B,SAA5BA,OAA4B;AAAA,kCAAnBE,QAAmB;AAAA,WAAnBA,QAAmB,kCAAR,KAAQ;;AAC7C,WAAM0B,iBAAenC,EAArB;AACA,WAAMoC,4BAA0BpC,EAAhC;;AAEA,WAAMqC,MAAMX,SAASC,aAAT,CAAuB,IAAvB,CAAZ;AACAU,WAAIT,SAAJ,IAAiB,KAAjB;AACAS,WAAIrC,EAAJ,GAASmC,KAAT;AACAE,WAAIlB,YAAJ,CAAiB,eAAjB,EAAkCiB,UAAlC;AACAC,WAAIlB,YAAJ,CAAiB,eAAjB,EAAkCV,SAASoB,QAAT,EAAlC;AACAQ,WAAIlB,YAAJ,CAAiB,MAAjB,EAAyB,KAAzB;AACAkB,WAAIjB,SAAJ,GAAgBhB,KAAhB;;AAEA,WAAMkC,WAAWZ,SAASC,aAAT,CAAuB,KAAvB,CAAjB;AACAW,gBAAStC,EAAT,GAAcoC,UAAd;AACAE,gBAASV,SAAT,IAAsB,UAAtB;AACAU,gBAASnB,YAAT,CAAsB,gBAAtB,EAAwCgB,KAAxC;AACAG,gBAASnB,YAAT,CAAsB,aAAtB,EAAqC,CAAC,CAACV,QAAF,EAAYoB,QAAZ,EAArC;AACAS,gBAASnB,YAAT,CAAsB,MAAtB,EAA8B,UAA9B;AACAmB,gBAASR,WAAT,CAAqBvB,OAArB;;AAEA,YAAK0B,OAAL,CAAaH,WAAb,CAAyBO,GAAzB;AACA,YAAKN,mBAAL,CAAyBD,WAAzB,CAAqCQ,QAArC;AACD;;;oCAEc;AACb,+BAAa,KAAKP,mBAAlB;AACD;;AAED;;;;;;;;gCAKWxC,S,EAAW;AACpB,YAAKyC,WAAL,CAAiBJ,SAAjB,4BAAoDrC,SAApD;AACD;;AAED;;;;;;;;kCAKa;AACX,cAAO,KAAKyC,WAAZ;AACD;;;;;;mBAvJkBjB,O;;;;;;;;;;;mBCmCGwB,I;;AArDxB;;AACA;;AAEA;;;AAGA,KAAMzB,aAAa,+BAAgB,eAAhB,EAAiC,MAAjC,CAAnB;;AAEA;;;AAGA,KAAM0B,OAAO,4BAAa,aAAb,EAA4B,MAA5B,CAAb;;AAEA;;;AAGA,KAAMC,OAAO,4BAAa,aAAb,EAA4B,OAA5B,CAAb;;AAEA;;;;;;AAMA,KAAMC,uBAAuB,SAAvBA,oBAAuB,CAASrB,WAAT,EAAsBP,UAAtB,EAAkC;AAC7D,OAAGA,UAAH,EAAe;AACb2B,UAAKpB,WAAL;AACAA,iBAAYC,KAAZ,CAAkBC,MAAlB,GAA8BF,YAAYG,YAA1C;AACD,IAHD,MAIK;AACHgB,UAAKnB,WAAL;AACAA,iBAAYC,KAAZ,CAAkBC,MAAlB,GAA2B,GAA3B;AACD;AACF,EATD;;AAWA;;;;;;;;AAQA,KAAMoB,uBAAuB,uBAAM,UAAStB,WAAT,EAAsBuB,KAAtB,EAA6B;AAC9DF,wBAAqBrB,WAArB,EAAkCP,WAAW8B,MAAMC,MAAjB,CAAlC;AACD,EAF4B,CAA7B;;AAIA;;;;;;AAMe,UAASN,IAAT,CAAcO,OAAd,EAAuB;AACpC,OAAMC,UAAUD,QAAQE,aAAR,CAAsB,iBAAtB,CAAhB;AACA,OAAMC,SAASF,QAAQG,YAAR,CAAqB,eAArB,CAAf;AACA,OAAMC,SAASL,QAAQE,aAAR,OAA0BC,MAA1B,CAAf;;AAEA,OAAGF,OAAH,EAAY;AACV;AACA,SAAIK,WAAW,IAAIC,gBAAJ,CAAqB,yBAAQV,qBAAqBQ,MAArB,CAAR,CAArB,CAAf;;AAEAC,cAASE,OAAT,CAAiBP,OAAjB,EAA0B;AACxBQ,mBAAY,IADY;AAExBC,0BAAmB,IAFK;AAGxBC,wBAAiB,CAAC,eAAD;AAHO,MAA1B;;AAMA;AACAV,aAAQW,gBAAR,CAAyB,OAAzB,EAAkC,UAASd,KAAT,EAAgB;AAChD,sCAAgB,eAAhB,EAAiCA,MAAMC,MAAvC;AACD,MAFD;;AAIAH,0BAAqBS,MAArB,EAA6BrC,WAAWiC,OAAX,CAA7B;AACD;;AAED,UAAOD,OAAP;AACD,E;;;;;;;;;;;;;AC7ED;;AAEA;;;;;;;;;AASO,KAAMI,sCAAe,uBAAM,UAAUS,IAAV,EAAgBC,EAAhB,EAAoB;AACpD,UAAOA,GAAGV,YAAH,CAAgBS,IAAhB,CAAP;AACD,EAF2B,CAArB;;AAIP;;;;;;;;;AASO,KAAMxC,sCAAe,uBAAM,UAAUwC,IAAV,EAAgBE,KAAhB,EAAuBD,EAAvB,EAA2B;AAC3DA,MAAGzC,YAAH,CAAgBwC,IAAhB,EAAsBE,KAAtB;AACD,EAF2B,CAArB;;AAIP;;;;;;;;AAQO,KAAMC,4CAAkB,uBAAM,UAAUH,IAAV,EAAgBC,EAAhB,EAAoB;AACvDA,MAAGE,eAAH,CAAmBH,IAAnB;AACD,EAF8B,CAAxB;;AAIP;;;;;;;;;AASO,KAAMI,sCAAe,uBAAM,UAAUJ,IAAV,EAAgBC,EAAhB,EAAoB;AACpD,UAAOA,GAAGG,YAAH,CAAgBJ,IAAhB,CAAP;AACD,EAF2B,CAArB;;AAIP;;;;;;;;;;AAUO,KAAMK,4CAAkB,uBAAM,UAAUL,IAAV,EAAgBE,KAAhB,EAAuBD,EAAvB,EAA2B;AAC9D,UAAOA,GAAGV,YAAH,CAAgBS,IAAhB,MAA0BE,KAAjC;AACD,EAF8B,CAAxB;;AAIP;;;;;;;;AAQO,KAAMI,4CAAkB,uBAAM,UAAUN,IAAV,EAAgBC,EAAhB,EAAoB;AACvD,OAAMC,QAAQX,aAAaS,IAAb,EAAmBC,EAAnB,CAAd;AACAzC,gBAAawC,IAAb,EAAmB,sCAAqBE,KAArB,CAAnB,EAAgDD,EAAhD;AACD,EAH8B,CAAxB;;AAKP;;;;;;;;;AASO,KAAM9B,oCAAc,uBAAM,UAAUoC,MAAV,EAAkBC,KAAlB,EAAyB;AACxD,UAAOD,OAAOpC,WAAP,CAAmBqC,KAAnB,CAAP;AACD,EAF0B,CAApB;;AAIP;;;;;;;;;;AAUO,KAAMnB,wCAAgB,uBAAM,UAAUoB,QAAV,EAAoBR,EAApB,EAAwB;AACzD,UAAOA,GAAGZ,aAAH,CAAiBoB,QAAjB,CAAP;AACD,EAF4B,CAAtB;;AAIP;;;;;;;;;;AAUO,KAAMC,8CAAmB,uBAAM,UAAUD,QAAV,EAAoBR,EAApB,EAAwB;AAC5D,UAAOA,GAAGS,gBAAH,CAAoBD,QAApB,CAAP;AACD,EAF+B,CAAzB,C;;;;;;;;;;;ACrHP;;;;;;;;;AASO,KAAME,wBAAQ,SAARA,KAAQ,CAASC,EAAT,EAAa;AAChC,OAAMC,QAAQD,GAAGE,MAAjB;;AAEA,UAAO,SAASC,EAAT,GAAc;AACnB,SAAMC,OAAOC,MAAMC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,EAAsC,CAAtC,CAAb;AACA,SAAIL,KAAKF,MAAL,IAAeD,KAAnB,EAA0B;AACxB,cAAOD,GAAGU,KAAH,CAAS,IAAT,EAAeN,IAAf,CAAP;AACD,MAFD,MAGK;AACH,cAAO,SAASO,EAAT,GAAc;AACnB,aAAMC,QAAQP,MAAMC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,EAAsC,CAAtC,CAAd;AACA,gBAAON,GAAGO,KAAH,CAAS,IAAT,EAAeN,KAAKS,MAAL,CAAYD,KAAZ,CAAf,CAAP;AACD,QAHD;AAID;AACF,IAXD;AAYD,EAfM;;AAiBP;;;;;;;;;;AAUO,KAAME,4BAAU,SAAVA,OAAU;AAAA,qCAAIC,GAAJ;AAAIA,QAAJ;AAAA;;AAAA,UAAYA,IAAIC,MAAJ,CAAW,UAACC,CAAD,EAAIC,CAAJ;AAAA,YAAU;AAAA,cAAaD,EAAEC,6BAAF,CAAb;AAAA,MAAV;AAAA,IAAX,CAAZ;AAAA,EAAhB;;AAEP;;;;;;;;;;;AAWO,KAAM/E,4BAAU4D,MAAM,UAAUC,EAAV,EAAcmB,GAAd,EAAmB;AAC9CA,OAAIhF,OAAJ,CAAY6D,EAAZ;AACD,EAFsB,CAAhB;;AAIP;;;;;;;;;;;AAWO,KAAMoB,oBAAMrB,MAAM,UAAUC,EAAV,EAAcmB,GAAd,EAAmB;AAC1C,UAAOA,IAAIC,GAAJ,CAAQpB,EAAR,CAAP;AACD,EAFkB,CAAZ;;AAIP;;;;;;;;;;;AAWO,KAAMqB,0BAAStB,MAAM,UAAUC,EAAV,EAAcmB,GAAd,EAAmB;AAC7C,UAAOA,IAAIE,MAAJ,CAAWrB,EAAX,CAAP;AACD,EAFqB,CAAf;;AAIP;;;;;;;;;;;AAWO,KAAMsB,sBAAOvB,MAAM,UAAUC,EAAV,EAAcmB,GAAd,EAAmB;AAC3C,UAAOA,IAAIG,IAAJ,CAAStB,EAAT,CAAP;AACD,EAFmB,CAAb;;AAIP;;;;;;;;;;;AAWO,KAAMuB,8BAAWxB,MAAM,UAAUT,KAAV,EAAiB6B,GAAjB,EAAsB;AAClD,UAAOA,IAAIK,OAAJ,CAAYlC,KAAZ,KAAsB,CAAC,CAA9B;AACD,EAFuB,CAAjB;;AAIP;;;;;;;;;;;AAWO,KAAMmC,4BAAU1B,MAAM,UAAU2B,MAAV,EAAkBP,GAAlB,EAAuB;AAClD,UAAOE,OAAO;AAAA,YAAS,CAACE,SAASjC,KAAT,EAAgBoC,MAAhB,CAAV;AAAA,IAAP,EAA0CP,GAA1C,CAAP;AACD,EAFsB,CAAhB;;AAIP;;;;;;;;AAQO,KAAMQ,sDAAuB,SAAvBA,oBAAuB,CAAUC,IAAV,EAAgB;AAClD,UAAO,CAACA,SAAS,MAAV,EAAkBtE,QAAlB,EAAP;AACD,EAFM,C;;;;;;;;;;;mBCjHiBU,I;;AAvBxB;;AACA;;AAEA;;;AAGA,KAAM6D,UAAU,yBAAQ,4BAAa,aAAb,EAA4B,MAA5B,CAAR,CAAhB;;AAEA;;;AAGA,KAAM3D,OAAO,4BAAa,aAAb,EAA4B,OAA5B,CAAb;;AAEA;;;AAGA,KAAM4D,cAAc,yBAAQ,4BAAa,eAAb,EAA8B,OAA9B,CAAR,CAApB;;AAEA;;;;;AAKe,UAAS9D,IAAT,CAAcO,OAAd,EAAuB;AACpC,OAAMwD,OAAOxD,QAAQuB,gBAAR,CAAyB,cAAzB,CAAb;AACA,OAAMkC,YAAYzD,QAAQuB,gBAAR,CAAyB,mBAAzB,CAAlB;;AAEAiC,QAAK5F,OAAL,CAAa,eAAO;AAClB2B,SAAIqB,gBAAJ,CAAqB,OAArB,EAA8B,UAAUd,KAAV,EAAiB;;AAE7CyD,mBAAYC,IAAZ;AACA1D,aAAMC,MAAN,CAAa1B,YAAb,CAA0B,eAA1B,EAA2C,MAA3C;;AAEAiF,eAAQG,SAAR;;AAEA,WAAInE,aAAaQ,MAAMC,MAAN,CAAaK,YAAb,CAA0B,eAA1B,CAAjB;AACAT,YAAKK,QAAQE,aAAR,OAA0BZ,UAA1B,CAAL;AACD,MATD;AAUD,IAXD;AAYD,E;;;;;;;;;;;;;;;;ACvCD;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;;;;KAIqBoE,kB;AACnB;;;AAGA,+BAAYrH,KAAZ,EAAmB;AAAA;;AAAA;;AACjB;AACA,cAAc,IAAd,EAAoB,yBAApB;;AAEA;AACA,UAAKG,IAAL,GAAY,qCAA2BH,KAA3B,CAAZ;;AAEA;AACA,UAAKsH,aAAL,GAAqB,4BAAkB,EAAEhH,YAAYN,MAAMM,UAApB,EAAlB,CAArB;AACA,UAAKiH,eAAL,GAAuB,+BAAvB;AACA,UAAKC,iBAAL,GAAyB,gCAAsB,EAAElH,YAAYN,MAAMM,UAApB,EAAtB,CAAzB;;AAEA;AACA,MAAC,kBAAD,EAAqB,QAArB,EAA+B,cAA/B,EAA+C,aAA/C,EACGiB,OADH,CACW;AAAA,cAAY,MAAKpB,IAAL,CAAUsH,WAAV,CAAsBC,QAAtB,CAAZ;AAAA,MADX;;AAGA;AACA,UAAKvH,IAAL,CAAUkB,UAAV,GAAuBsB,WAAvB,CAAmC,KAAK4E,eAAL,CAAqBlG,UAArB,EAAnC;AACA,UAAKlB,IAAL,CAAUkB,UAAV,GAAuBsB,WAAvB,CAAmC,KAAK6E,iBAAL,CAAuBnG,UAAvB,EAAnC;;AAEA;AACA,UAAKd,SAAL,CAAe,CAAC,QAAD,CAAf,EAA2B,KAAKgH,eAAhC;AACA,UAAKhH,SAAL,CAAe,CAAC,QAAD,CAAf,EAA2B,KAAKiH,iBAAhC;;AAEA;AACA,UAAKrH,IAAL,CAAUK,EAAV,CAAa,QAAb,EAAuB,KAAKmH,MAA5B,EAAoC,IAApC;AACA,UAAKxH,IAAL,CAAUK,EAAV,CAAa,eAAb,EAA8B,KAAKoH,iBAAnC,EAAsD,IAAtD;AACA,UAAKL,eAAL,CAAqB/G,EAArB,CAAwB,cAAxB,EAAwC,KAAKqH,cAA7C,EAA6D,IAA7D;AACA,UAAKL,iBAAL,CAAuBhH,EAAvB,CAA0B,OAA1B,EAAmC,KAAKsH,eAAxC,EAAyD,IAAzD;;AAEA,UAAKC,mBAAL;AACD;;AAED;;;;;;;2CAGsB;AAAA;;AACpB;AACA,YAAKT,aAAL,CAAmBK,MAAnB,CAA0B,EAA1B,EACG3G,IADH,CACQ;AAAA,gBAAgB,OAAKuG,eAAL,CAAqBS,MAArB,CAA4BC,YAA5B,CAAhB;AAAA,QADR;AAED;;AAED;;;;;;;;kCAKgB;AAAA;;AAAA,WAARC,KAAQ,QAARA,KAAQ;;AACd,YAAKZ,aAAL,CAAmBK,MAAnB,CAA0BO,KAA1B,EACGlH,IADH,CACQ;AAAA,gBAAgB,OAAKuG,eAAL,CAAqBS,MAArB,CAA4BC,YAA5B,CAAhB;AAAA,QADR;AAED;;AAED;;;;;;yCAGoB;AAClBE,eAAQC,KAAR,CAAc,uCAAd,EAAuD3E,KAAvD;AACD;;AAED;;;;;;;;2CAKqB;AAAA,WAAL5C,EAAK,SAALA,EAAK;;AACnB,YAAK0G,eAAL,CAAqBlE,IAArB;AACA,YAAKmE,iBAAL,CAAuBa,QAAvB,CAAgCxH,EAAhC;AACA,YAAK2G,iBAAL,CAAuBlE,IAAvB;AACA,YAAKgF,IAAL,CAAU,QAAV;AACD;;AAGD;;;;;;uCAGkB;AAChB,YAAKd,iBAAL,CAAuBnE,IAAvB;AACA,YAAKkE,eAAL,CAAqBjE,IAArB;AACA,YAAKgF,IAAL,CAAU,QAAV;AACD;;AAED;;;;;;;;kCAKa;AACX,cAAO,KAAKnI,IAAL,CAAUkB,UAAV,EAAP;AACD;;;;;;mBA5FkBgG,kB;;;;;;;;;;;;;;;;ACVrB;;;;AAEA;;;;KAIqBkB,kB;AACnB;;;;AAIA,+BAAYvI,KAAZ,EAAmB;AAAA;;AACjB;AACA,cAAc,IAAd,EAAoB,yBAApB;;AAEA;AACA,SAAMwI,OAAO,KAAKC,iBAAL,EAAb;AACA,SAAMC,aAAa,KAAKC,uBAAL,EAAnB;;AAEA;AACA,SAAMC,YAAYrG,SAASC,aAAT,CAAuB,KAAvB,CAAlB;AACAoG,eAAUnG,SAAV,GAAsB,YAAtB;AACAmG,eAAUjG,WAAV,CAAsB6F,IAAtB;AACAI,eAAUjG,WAAV,CAAsB+F,UAAtB;;AAEA;AACA,UAAK7F,WAAL,GAAoBN,SAASC,aAAT,CAAuB,KAAvB,CAApB;AACA,UAAKK,WAAL,CAAiBF,WAAjB,CAA6BiG,SAA7B;AACD;;AAED;;;;;;;;;;;iCAOYC,I,EAAM;AAAA;;AAChB,WAAMlF,UAAUpB,SAASC,aAAT,CAAuB,IAAvB,CAAhB;AACAmB,eAAQ3B,YAAR,CAAqB,MAArB,EAA6B,UAA7B;AACA2B,eAAQ1B,SAAR,GAAoB4G,IAApB;;AAEAlF,eAAQY,gBAAR,CAAyB,OAAzB,EAAkC,iBAAS;AACzC,eAAK+D,IAAL,CAAU,eAAV,EAA2B;AACzB3E,oBAASF,MAAMC;AADU,UAA3B;AAGD,QAJD;;AAMA;AACA,WAAG,KAAKoF,cAAL,CAAoBC,iBAApB,GAAwC,CAA3C,EAA8C;AAC5CpF,iBAAQ3B,YAAR,CAAqB,eAArB,EAAsC,MAAtC;AACD;;AAED;AACA,YAAK8G,cAAL,CAAoBnG,WAApB,CAAgCgB,OAAhC;;AAEA,cAAOA,OAAP;AACD;;AAED;;;;;;;;yCAKoB;AAClB,YAAKmF,cAAL,GAAsBvG,SAASC,aAAT,CAAuB,IAAvB,CAAtB;AACA,YAAKsG,cAAL,CAAoB9G,YAApB,CAAiC,MAAjC,EAAyC,SAAzC;AACA,YAAK8G,cAAL,CAAoBrG,SAApB,GAAgC,UAAhC;;AAEA,WAAMuG,aAAazG,SAASC,aAAT,CAAuB,KAAvB,CAAnB;AACAwG,kBAAWrG,WAAX,CAAuB,KAAKmG,cAA5B;;AAEA,WAAM7H,QAAQsB,SAASC,aAAT,CAAuB,KAAvB,CAAd;AACAvB,aAAMwB,SAAN,GAAkB,YAAlB;AACAxB,aAAMgB,SAAN,GAAkB,sBAAlB;;AAEA,WAAMuG,OAAOjG,SAASC,aAAT,CAAuB,KAAvB,CAAb;AACAgG,YAAK/F,SAAL,GAAiB,MAAjB;AACA+F,YAAK7F,WAAL,CAAiB1B,KAAjB;AACAuH,YAAK7F,WAAL,CAAiBqG,UAAjB;;AAEA,cAAOR,IAAP;AACD;;AAED;;;;;;;;+CAK0B;AAAA;;AACxB;AACA,WAAMS,aAAa1G,SAASC,aAAT,CAAuB,OAAvB,CAAnB;AACAyG,kBAAWxG,SAAX,GAAuB,mBAAvB;AACAwG,kBAAWjH,YAAX,CAAwB,MAAxB,EAAgC,MAAhC;AACAiH,kBAAWjH,YAAX,CAAwB,aAAxB,EAAuC,0BAAvC;AACAiH,kBAAW1E,gBAAX,CAA4B,OAA5B,EAAqC,iBAAS;AAC5C,gBAAK+D,IAAL,CAAU,QAAV,EAAoB;AAClB3E,oBAASF,MAAMC,MADG;AAElBwE,kBAAOzE,MAAMC,MAAN,CAAagB;AAFF,UAApB;AAID,QALD;;AAOA;AACA,WAAMwE,cAAc3G,SAASC,aAAT,CAAuB,KAAvB,CAApB;AACA0G,mBAAYzG,SAAZ,GAAwB,0BAAxB;;AAEA;AACA,WAAMiG,aAAanG,SAASC,aAAT,CAAuB,KAAvB,CAAnB;AACAkG,kBAAWjG,SAAX,GAAuB,4BAAvB;AACAiG,kBAAW/F,WAAX,CAAuBsG,UAAvB;AACAP,kBAAW/F,WAAX,CAAuBuG,WAAvB;;AAEA;AACA,WAAMC,oBAAoB5G,SAASC,aAAT,CAAuB,KAAvB,CAA1B;AACA2G,yBAAkB1G,SAAlB,GAA8B,6BAA9B;AACA0G,yBAAkBxG,WAAlB,CAA8B+F,UAA9B;;AAEA,cAAOS,iBAAP;AACD;;AAED;;;;;;;;kCAKa;AACX,cAAO,KAAKtG,WAAZ;AACD;;;;;;mBAzHkB0F,kB;;;;;;;;;;;ACNrB;;;AAGO,KAAMa,8BAAW,SAAXA,QAAW;AAAA,UAAO;AAC7BC,gBAAW,EADkB;;AAG7B;;;;;;;;;AASA7I,SAAI,YAAS8I,IAAT,EAAeC,QAAf,EAAyBC,KAAzB,EAAgC;AAClC;;;;;AAKA,WAAMC,UAAU;AACd,qBAAYF,QADE;AAEd,kBAASC;AAFK,QAAhB;;AAKA,YAAKH,SAAL,CAAeC,IAAf,IAAuB,KAAKD,SAAL,CAAeC,IAAf,KAAwB,EAA/C;AACA,YAAKD,SAAL,CAAeC,IAAf,EAAqBI,IAArB,CAA0BD,OAA1B;AACD,MAzB4B;;AA2B7B;;;;;;;;;AASAnB,WAAM,cAASgB,IAAT,EAAe7F,KAAf,EAAsB;AAC1B,WAAMkG,WAAW,KAAKN,SAAL,CAAeC,IAAf,KAAwB,EAAzC;;AAEA,cAAOK,SAASC,KAAT,CAAe,UAASH,OAAT,EAAkB;AACtC,gBAAOA,QAAQF,QAAR,CAAiB3D,IAAjB,CAAsB6D,QAAQD,KAAR,IAAiB,IAAvC,EAA6C/F,KAA7C,MAAwD,KAA/D;AACD,QAFM,CAAP;AAGD,MA1C4B;;AA4C7B;;;;;;AAMAlD,gBAAW,mBAASsJ,KAAT,EAAgBC,QAAhB,EAA0B;AACnC,WAAIC,OAAO,IAAX;AACAF,aAAMtI,OAAN,CAAc;AAAA,gBAAQuI,SAAStJ,EAAT,CAAY8I,IAAZ,EAAkB;AAAA,kBAASS,KAAKzB,IAAL,CAAUgB,IAAV,EAAgB7F,KAAhB,CAAT;AAAA,UAAlB,CAAR;AAAA,QAAd;AACD;AArD4B,IAAP;AAAA,EAAjB,C;;;;;;;;;;;;;;ACHP;;AACA;;;;AACA;;;;;;;;AAEA,KAAMuG,sBAAsB,uBAAM,UAAS/B,YAAT,EAAuBpH,EAAvB,EAA2B;AAC3D,UAAOoH,aAAaxB,MAAb,CAAoB;AAAA,YAAe3F,YAAYD,EAAZ,KAAmBA,EAAlC;AAAA,IAApB,EAA0D,CAA1D,CAAP;AACD,EAF2B,CAA5B;;AAIA;;;;KAGqBoJ,a;AACnB;;;;AAIA,0BAAYjK,KAAZ,EAAmB;AAAA;;AACjB,UAAKK,QAAL,GAAgB,0BAAgB;AAC9BC,mBAAYN,MAAMM;AADY,MAAhB,CAAhB;;AAIA;AACA,UAAK4J,KAAL,GAAa,oBAAK,YAAW;AAC3B,YAAKC,KAAL,CAAW,OAAX,EAAoB,EAACC,OAAO,GAAR,EAApB;AACA,YAAKD,KAAL,CAAW,SAAX;AACA,YAAKA,KAAL,CAAW,aAAX;AACA,YAAKA,KAAL,CAAW,UAAX;AACA,YAAKE,GAAL,CAAS,IAAT;AACD,MANY,CAAb;;AAQA,UAAKpC,YAAL,GAAoB,KAAK5H,QAAL,CAAc4H,YAAd,EAApB,CAdiB,CAciC;AAClD,UAAKA,YAAL,CAAkBjH,IAAlB,CAAuB,yBAAQ,KAAKsJ,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAR,CAAvB,EAfiB,CAe4C;AAC9D;;AAED;;;;;;;;;gCAKWzJ,W,EAAa;AACtB,YAAKoJ,KAAL,CAAWM,GAAX,CAAe;AACbvJ,gBAAOH,YAAYG,KADN;AAEbwJ,kBAAS3J,YAAY2J,OAFR;AAGb5J,aAAIC,YAAYD;AAHH,QAAf;AAKD;;AAED;;;;;;;;;;4BAOOqH,K,EAAO;AAAA;;AACZ;AACA,WAAIA,UAAU,EAAd,EAAkB;AAChB,gBAAO,KAAKD,YAAL,CAAkBjH,IAAlB,CAAuB;AAAA,kBAAgBiH,YAAhB;AAAA,UAAvB,CAAP;AACD;;AAED,cAAO,KAAKA,YAAL,CAAkBjH,IAAlB,CAAuB,wBAAgB;AAC5C,gBAAO,MAAKkJ,KAAL,CAAWvC,MAAX,CAAkBO,KAAlB,EACJ1B,GADI,CACA;AAAA,kBAAUkE,OAAOL,GAAjB;AAAA,UADA,EAEJ7D,GAFI,CAEAwD,oBAAoB/B,YAApB,CAFA,CAAP;AAGD,QAJM,CAAP;AAKD;;;;;;mBAtDkBgC,a;;;;;;;;;;;;;;;;ACXrB;;;;;;;;;;;;;;;;;;KAkBqBU,W;AACnB;;;AAGA,8BAA4B;AAAA,SAAdrK,UAAc,QAAdA,UAAc;;AAAA;;AAC1B,UAAKA,UAAL,GAAkBA,UAAlB;;AAEA,SAAG,CAACsK,OAAOC,kBAAX,EAA8B;AAC5BD,cAAOC,kBAAP,GAA4BC,MAAS,KAAKxK,UAAd,yBAA8C;AACxEyK,iBAAQ,KADgE;AAExEC,sBAAa;AAF2D,QAA9C,EAGzBhK,IAHyB,CAGpB;AAAA,gBAAU0J,OAAOO,IAAP,EAAV;AAAA,QAHoB,EAGKjK,IAHL,CAGU;AAAA,gBAAQiK,KAAKC,SAAb;AAAA,QAHV,CAA5B;AAID;AAEF;;AAED;;;;;;;;;oCAKe;AACb,cAAON,OAAOC,kBAAd;AACD;;AAED;;;;;;;;;;iCAOYhK,E,EAAI;AACd,cAAO+J,OAAOC,kBAAP,CAA0B7J,IAA1B,CAA+B,wBAAgB;AACpD,gBAAOiH,aAAaxB,MAAb,CAAoB;AAAA,kBAAe3F,YAAYD,EAAZ,KAAmBA,EAAlC;AAAA,UAApB,EAA0D,CAA1D,CAAP;AACD,QAFM,CAAP;;AAIA;;;;AAID;;AAED;;;;;;;;;;wCAOmBA,E,EAAI;AACrB,cAAOiK,MAAS,KAAKxK,UAAd,2BAA8CO,EAA9C,eAA4D;AACjEkK,iBAAQ,KADyD;AAEjEC,sBAAa;AAFoD,QAA5D,EAGJhK,IAHI,CAGC;AAAA,gBAAU0J,OAAOO,IAAP,EAAV;AAAA,QAHD,CAAP;AAID;;;;;;mBAvDkBN,W;;;;;;AClBrB;AACA;AACA;AACA;AACA;;AAEA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA,SAAQ;AACR;AACA,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,IAAI;AACf,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,SAAS;AACpB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA,cAAa;AACb;AACA;AACA;AACA,wDAAuD,8CAA8C;;AAErG;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB,YAAW,SAAS;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB,YAAW,SAAS;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,MAAM;AACjB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB,iBAAiB;AAClC;;AAEA,oBAAmB,iBAAiB;AACpC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,iBAAiB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW,YAAY;AACvB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,YAAY;AACvB;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,MAAM;AACjB,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA,cAAa,sBAAsB;AACnC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB;AACA,YAAW,OAAO;AAClB;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,eAAe;AAC1B,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,eAAe;AAC1B,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;;AAEA,wDAAuD,6BAA6B;AACpF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA,YAAW,OAAO;AAClB;AACA,cAAa;AACb;AACA;AACA;AACA,wBAAuB;AACvB,gBAAe;;AAEf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA,YAAW,QAAQ;AACnB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,QAAQ;AACnB;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,oBAAmB,wBAAwB;AAC3C;AACA;AACA;AACA;AACA,IAAG;;AAEH;;AAEA,kBAAiB,8BAA8B;AAC/C;AACA;;AAEA,oBAAmB,yBAAyB;AAC5C;AACA;AACA;;AAEA;;AAEA;AACA,sBAAqB,iBAAiB;AACtC;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iCAAgC,sBAAsB;AACtD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA4D,wBAAwB;;AAEpF;AACA;AACA,IAAG;;AAEH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,wBAAuB,aAAa;AACpC;AACA;;AAEA;AACA,QAAO;;AAEP;AACA,MAAK;;AAEL;AACA;AACA,IAAG;;AAEH;AACA;AACA,eAAc;AACd,MAAK;AACL;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB,0BAA0B;AAC3C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG,IAAI;;AAEP;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+BAA8B;;AAE9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wBAAuB,UAAU;;AAEjC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sBAAqB,0BAA0B;AAC/C,4BAA2B,2BAA2B;;AAEtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,cAAc;AACxC,gCAA+B,cAAc,sBAAsB;AACnE,gCAA+B,aAAa;AAC5C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,MAAM;AACjB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG,IAAI;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,SAAS;AACxB;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oCAAmC;;AAEnC;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;;AAEA,kBAAiB,kBAAkB;AACnC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;;AAEA,kBAAiB,kBAAkB;AACnC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA,kBAAiB,kBAAkB;AACnC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA,6BAA4B;AAC5B;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,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","file":"h5p-hub-client.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d9d2a87e4fa359d005e7","require('../../src/styles/main.scss');\n\n// Load library\nH5P = H5P || {};\nH5P.HubClient = require('../scripts/hub').default;\n\n\n// WEBPACK FOOTER //\n// ./src/entries/dist.js","module.exports = __webpack_public_path__ + \"h5p-hub-client.css\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/styles/main.scss\n// module id = 1\n// module chunks = 0","import HubView from './hub-view';\nimport ContentTypeSection from './content-type-section/content-type-section';\nimport UploadSection from './upload-section/upload-section';\nimport HubServices from './hub-services';\nimport { Eventful } from './mixins/eventful';\n\n/**\n * @typedef {object} HubState\n * @property {string} title\n * @property {string} sectionId\n * @property {boolean} expanded\n * @property {string} apiRootUrl\n */\n/**\n * @class\n * @mixes Eventful\n */\nexport default class Hub {\n  /**\n   * @param {HubState} state\n   */\n  constructor(state) {\n    // add event system\n    Object.assign(this, Eventful());\n\n    // controllers\n    this.contentTypeSection = new ContentTypeSection(state);\n    this.uploadSection = new UploadSection(state);\n\n    // views\n    this.view = new HubView({\n      sectionId: 'create-content'\n    });\n\n    // services\n    this.services = new HubServices({\n      apiRootUrl: state.apiRootUrl\n    });\n\n    // propag ate controller events\n    this.propagate(['select', 'resize'], this.contentTypeSection);\n\n    // handle events\n    this.on('select', this.setPanelTitle, this);\n    this.on('select', this.view.closePanel, this.view);\n    this.on('resize', this.view.resize, this.view);\n\n    this.initTabPanel()\n  }\n\n  /**\n   * Returns the promise of a content type\n   * @param {string} id\n   * @return {Promise.<ContentType>}\n   */\n  getContentType(id) {\n    return this.services.contentType(id);\n  }\n\n  /**\n   * Sets the title of the panel\n   *\n   * @param {string} id\n   */\n  setPanelTitle({id}) {\n    this.getContentType(id).then(({title}) => this.view.setTitle(title));\n  }\n\n  /**\n   * Initiates the tab panel\n   */\n  initTabPanel() {\n    const tabConfigs = [{\n      title: 'Create Content',\n      id: 'create-content',\n      content: this.contentTypeSection.getElement(),\n      selected: true\n    },\n    {\n      title: 'Upload',\n      id: 'upload-section',\n      content: this.uploadSection.getElement()\n    }];\n\n    tabConfigs.forEach(tabConfig => this.view.addTab(tabConfig));\n    this.view.initTabPanel();\n  }\n\n  /**\n   * Returns the root element in the view\n   *\n   * @return {HTMLElement}\n   */\n  getElement() {\n    return this.view.getElement();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/hub.js","import initPanel from \"../../node_modules/h5p-sdk/src/scripts/components/panel\"\nimport initTabPanel from \"../../node_modules/h5p-sdk/src/scripts/components/tab-panel\"\nimport { attributeEquals } from \"../../node_modules/h5p-sdk/src/scripts/utils/elements\";\n\n/**\n * @const\n * @type {string}\n */\nconst ATTRIBUTE_ARIA_EXPANDED = \"aria-expanded\";\n\n/**\n * @type {function}\n */\nconst isExpanded = attributeEquals(ATTRIBUTE_ARIA_EXPANDED, 'true');\n\n/**\n * @class\n */\nexport default class HubView {\n  /**\n   * @param {HubState} state\n   */\n  constructor(state) {\n    this.renderTabPanel(state);\n    this.renderPanel(state);\n  }\n\n  /**\n   * Closes the panel\n   */\n  closePanel() {\n    this.titleElement.setAttribute('aria-expanded', 'false')\n  }\n\n  /**\n   * Sets the title\n   *\n   * @param {string} title\n   */\n  setTitle(title) {\n    this.titleElement.innerHTML = title;\n  }\n\n  /**\n   * Resize the body of the panel\n   */\n  resize(){\n    if(isExpanded(this.titleElement)) {\n      this.bodyElement.style.height = `${this.bodyElement.scrollHeight}px`\n    }\n  }\n\n  /**\n   * Creates the dom for the panel\n   *\n   * @param {string} title\n   * @param {string} sectionId\n   * @param {boolean} expanded\n   */\n  renderPanel({title, sectionId, expanded = false}) {\n    /**\n     * @type {HTMLElement}\n     */\n    this.titleElement = document.createElement('div');\n    this.titleElement.className += \"panel-header icon-hub-icon\";\n    this.titleElement.setAttribute('aria-expanded', expanded.toString());\n    this.titleElement.setAttribute('aria-controls', `panel-body-${sectionId}`);\n    this.titleElement.innerHTML = title || '';\n\n    /**\n     * @type {HTMLElement}\n     */\n    this.bodyElement = document.createElement('div');\n    this.bodyElement.className += \"panel-body\";\n    this.bodyElement.setAttribute('aria-hidden', (!expanded).toString());\n    this.bodyElement.id = `panel-body-${sectionId}`;\n    this.bodyElement.appendChild(this.tabContainerElement);\n    if(!expanded){\n      this.bodyElement.style.height = \"0\";\n    }\n\n    /**\n     * @type {HTMLElement}\n     */\n    this.rootElement = document.createElement('div');\n    this.rootElement.className += `h5p-hub h5p-section-${sectionId} panel`;\n    this.rootElement.appendChild(this.titleElement);\n    this.rootElement.appendChild(this.bodyElement);\n\n    initPanel(this.rootElement);\n  }\n\n  /**\n   * Creates the dom for the tab panel\n   */\n  renderTabPanel() {\n    /**\n     * @type {HTMLElement}\n     */\n    this.tablist = document.createElement('ul');\n    this.tablist.className += \"tablist\";\n    this.tablist.setAttribute ('role', 'tablist');\n\n    /**\n     * @type {HTMLElement}\n     */\n    this.tabListWrapper = document.createElement('nav');\n    this.tabListWrapper.appendChild(this.tablist);\n\n    /**\n     * @type {HTMLElement}\n     */\n    this.tabContainerElement = document.createElement('div');\n    this.tabContainerElement.className += 'tab-panel';\n    this.tabContainerElement.appendChild(this.tabListWrapper);\n  }\n\n  /**\n   * Adds a tab\n   *\n   * @param {string} title\n   * @param {string} id\n   * @param {HTMLElement} content\n   * @param {boolean} selected\n   */\n  addTab({title, id, content, selected = false}) {\n    const tabId = `tab-${id}`;\n    const tabPanelId = `tab-panel-${id}`;\n\n    const tab = document.createElement('li');\n    tab.className += 'tab';\n    tab.id = tabId;\n    tab.setAttribute('aria-controls', tabPanelId);\n    tab.setAttribute('aria-selected', selected.toString());\n    tab.setAttribute('role', 'tab');\n    tab.innerHTML = title;\n\n    const tabPanel = document.createElement('div');\n    tabPanel.id = tabPanelId;\n    tabPanel.className += 'tabpanel';\n    tabPanel.setAttribute('aria-lablledby', tabId);\n    tabPanel.setAttribute('aria-hidden', (!selected).toString());\n    tabPanel.setAttribute('role', 'tabpanel');\n    tabPanel.appendChild(content);\n\n    this.tablist.appendChild(tab);\n    this.tabContainerElement.appendChild(tabPanel);\n  }\n\n  initTabPanel() {\n    initTabPanel(this.tabContainerElement);\n  }\n\n  /**\n   * Sets the section\n   *\n   * @param {string} sectionId\n   */\n  setSection(sectionId) {\n    this.rootElement.className = `h5p-hub h5p-section-${sectionId} panel`;\n  }\n\n  /**\n   * Returns the root html element\n   *\n   * @return {HTMLElement}\n   */\n  getElement() {\n    return this.rootElement;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/hub-view.js","import {setAttribute, attributeEquals, toggleAttribute} from '../utils/elements';\nimport {curry, forEach} from '../utils/functional';\n\n/**\n * @type {function}\n */\nconst isExpanded = attributeEquals(\"aria-expanded\", 'true');\n\n/**\n * @type {function}\n */\nconst hide = setAttribute('aria-hidden', 'true');\n\n/**\n * @type {function}\n */\nconst show = setAttribute('aria-hidden', 'false');\n\n/**\n * Toggles the body visibility\n *\n * @param {HTMLElement} bodyElement\n * @param {boolean} isExpanded\n */\nconst toggleBodyVisibility = function(bodyElement, isExpanded) {\n  if(isExpanded) {\n    show(bodyElement);\n    bodyElement.style.height = `${bodyElement.scrollHeight}px`;\n  }\n  else {\n    hide(bodyElement);\n    bodyElement.style.height = \"0\";\n  }\n};\n\n/**\n * Handles changes to aria-expanded\n *\n * @param {HTMLElement} bodyElement\n * @param {MutationRecord} event\n *\n * @function\n */\nconst onAriaExpandedChange = curry(function(bodyElement, event) {\n  toggleBodyVisibility(bodyElement, isExpanded(event.target));\n});\n\n/**\n * Initializes a panel\n *\n * @param {HTMLElement} element\n * @return {HTMLElement}\n */\nexport default function init(element) {\n  const titleEl = element.querySelector('[aria-expanded]');\n  const bodyId = titleEl.getAttribute('aria-controls');\n  const bodyEl = element.querySelector(`#${bodyId}`);\n\n  if(titleEl) {\n    // set observer on title for aria-expanded\n    let observer = new MutationObserver(forEach(onAriaExpandedChange(bodyEl)));\n\n    observer.observe(titleEl, {\n      attributes: true,\n      attributeOldValue: true,\n      attributeFilter: [\"aria-expanded\"]\n    });\n\n    // Set click listener that toggles aria-expanded\n    titleEl.addEventListener('click', function(event) {\n      toggleAttribute(\"aria-expanded\", event.target);\n    });\n\n    toggleBodyVisibility(bodyEl, isExpanded(titleEl));\n  }\n\n  return element;\n}\n\n\n// WEBPACK FOOTER //\n// ./~/h5p-sdk/src/scripts/components/panel.js","import {curry, inverseBooleanString} from './functional'\n\n/**\n * Get an attribute value from element\n *\n * @param {string} name\n * @param {HTMLElement} el\n *\n * @function\n * @return {string}\n */\nexport const getAttribute = curry(function (name, el) {\n  return el.getAttribute(name);\n});\n\n/**\n * Set an attribute on a html element\n *\n * @param {string} name\n * @param {string} value\n * @param {HTMLElement} el\n *\n * @function\n */\nexport const setAttribute = curry(function (name, value, el) {\n  el.setAttribute(name, value);\n});\n\n/**\n * Remove attribute from html element\n *\n * @param {string} name\n * @param {HTMLElement} el\n *\n * @function\n */\nexport const removeAttribute = curry(function (name, el) {\n  el.removeAttribute(name);\n});\n\n/**\n * Check if element has an attribute\n *\n * @param {string} name\n * @param {HTMLElement} el\n *\n * @function\n * @return {boolean}\n */\nexport const hasAttribute = curry(function (name, el) {\n  return el.hasAttribute(name);\n});\n\n/**\n * Check if element has an attribute that equals\n *\n * @param {string} name\n * @param {string} value\n * @param {HTMLElement} el\n *\n * @function\n * @return {boolean}\n */\nexport const attributeEquals = curry(function (name, value, el) {\n  return el.getAttribute(name) === value;\n});\n\n/**\n * Toggles an attribute between 'true' and 'false';\n *\n * @param {string} name\n * @param {HTMLElement} el\n *\n * @function\n */\nexport const toggleAttribute = curry(function (name, el) {\n  const value = getAttribute(name, el);\n  setAttribute(name, inverseBooleanString(value), el);\n});\n\n/**\n * The appendChild() method adds a node to the end of the list of children of a specified parent node.\n *\n * @param {HTMLElement} parent\n * @param {HTMLElement} child\n *\n * @function\n * @return {HTMLElement}\n */\nexport const appendChild = curry(function (parent, child) {\n  return parent.appendChild(child);\n});\n\n/**\n * Returns the first element that is a descendant of the element on which it is invoked\n * that matches the specified group of selectors.\n *\n * @param {string} selector\n * @param {HTMLElement} el\n *\n * @function\n * @return {HTMLElement}\n */\nexport const querySelector = curry(function (selector, el) {\n  return el.querySelector(selector);\n});\n\n/**\n * Returns a non-live NodeList of all elements descended from the element on which it\n * is invoked that matches the specified group of CSS selectors.\n *\n * @param {string} selector\n * @param {HTMLElement} el\n *\n * @function\n * @return {NodeList}\n */\nexport const querySelectorAll = curry(function (selector, el) {\n  return el.querySelectorAll(selector);\n});\n\n\n// WEBPACK FOOTER //\n// ./~/h5p-sdk/src/scripts/utils/elements.js","/**\n * Returns a curried version of a function\n *\n * @param {function} fn\n *\n * @public\n *\n * @return {function}\n */\nexport const curry = function(fn) {\n  const arity = fn.length;\n\n  return function f1() {\n    const args = Array.prototype.slice.call(arguments, 0);\n    if (args.length >= arity) {\n      return fn.apply(null, args);\n    }\n    else {\n      return function f2() {\n        const args2 = Array.prototype.slice.call(arguments, 0);\n        return f1.apply(null, args.concat(args2));\n      }\n    }\n  };\n};\n\n/**\n * Compose functions together, executing from right to left\n *\n * @param {function...} fns\n *\n * @function\n * @public\n *\n * @return {function}\n */\nexport const compose = (...fns) => fns.reduce((f, g) => (...args) => f(g(...args)));\n\n/**\n * Applies a function to each element in an array\n *\n * @param {function} fn\n * @param {Array} arr\n *\n * @function\n * @public\n *\n * @return {function}\n */\nexport const forEach = curry(function (fn, arr) {\n  arr.forEach(fn);\n});\n\n/**\n * Maps a function to an array\n *\n * @param {function} fn\n * @param {Array} arr\n *\n * @function\n * @public\n *\n * @return {function}\n */\nexport const map = curry(function (fn, arr) {\n  return arr.map(fn);\n});\n\n/**\n * Applies a filter to an array\n *\n * @param {function} fn\n * @param {Array} arr\n *\n * @function\n * @public\n *\n * @return {function}\n */\nexport const filter = curry(function (fn, arr) {\n  return arr.filter(fn);\n});\n\n/**\n * Applies a some to an array\n *\n * @param {function} fn\n * @param {Array} arr\n *\n * @function\n * @public\n *\n * @return {function}\n */\nexport const some = curry(function (fn, arr) {\n  return arr.some(fn);\n});\n\n/**\n * Returns true if an array contains a value\n *\n * @param {*} value\n * @param {Array} arr\n *\n * @function\n * @public\n *\n * @return {function}\n */\nexport const contains = curry(function (value, arr) {\n  return arr.indexOf(value) != -1;\n});\n\n/**\n * Returns an array without the supplied values\n *\n * @param {Array} values\n * @param {Array} arr\n *\n * @function\n * @public\n *\n * @return {function}\n */\nexport const without = curry(function (values, arr) {\n  return filter(value => !contains(value, values), arr)\n});\n\n/**\n * Takes a string that is either 'true' or 'false' and returns the opposite\n *\n * @param {string} bool\n *\n * @public\n * @return {string}\n */\nexport const inverseBooleanString = function (bool) {\n  return (bool !== 'true').toString();\n};\n\n\n// WEBPACK FOOTER //\n// ./~/h5p-sdk/src/scripts/utils/functional.js","import {setAttribute} from '../utils/elements';\nimport {forEach} from '../utils/functional';\n\n/**\n * @type {function}\n */\nconst hideAll = forEach(setAttribute('aria-hidden', 'true'));\n\n/**\n * @type {function}\n */\nconst show = setAttribute('aria-hidden', 'false');\n\n/**\n * @type {function}\n */\nconst unSelectAll = forEach(setAttribute('aria-selected', 'false'));\n\n/**\n * Initiates a tab panel\n *\n * @param {HTMLElement} element\n */\nexport default function init(element) {\n  const tabs = element.querySelectorAll('[role=\"tab\"]');\n  const tabPanels = element.querySelectorAll('[role=\"tabpanel\"]');\n\n  tabs.forEach(tab => {\n    tab.addEventListener('click', function (event) {\n\n      unSelectAll(tabs);\n      event.target.setAttribute('aria-selected', 'true');\n\n      hideAll(tabPanels);\n\n      let tabPanelId = event.target.getAttribute('aria-controls');\n      show(element.querySelector(`#${tabPanelId}`));\n    });\n  })\n}\n\n\n// WEBPACK FOOTER //\n// ./~/h5p-sdk/src/scripts/components/tab-panel.js","import ContentTypeSectionView from \"./content-type-section-view\";\nimport SearchService from \"../search-service/search-service\";\nimport ContentTypeList from '../content-type-list/content-type-list';\nimport ContentTypeDetail from '../content-type-detail/content-type-detail';\nimport {Eventful} from '../mixins/eventful';\n\n/**\n * @class ContentTypeSection\n * @mixes Eventful\n */\nexport default class ContentTypeSection {\n  /**\n   * @param {HubState} state\n   */\n  constructor(state) {\n    // add event system\n    Object.assign(this, Eventful());\n\n    // add view\n    this.view = new ContentTypeSectionView(state);\n\n    // controller\n    this.searchService = new SearchService({ apiRootUrl: state.apiRootUrl });\n    this.contentTypeList = new ContentTypeList();\n    this.contentTypeDetail = new ContentTypeDetail({ apiRootUrl: state.apiRootUrl });\n\n    // add menu items\n    ['My Content Types', 'Newest', 'Most Popular', 'Recommended']\n      .forEach(menuText => this.view.addMenuItem(menuText));\n\n    // set sub view (TODO find other way)\n    this.view.getElement().appendChild(this.contentTypeList.getElement());\n    this.view.getElement().appendChild(this.contentTypeDetail.getElement());\n\n    // propagate events\n    this.propagate(['select'], this.contentTypeList);\n    this.propagate(['select'], this.contentTypeDetail);\n\n    // register listeners\n    this.view.on('search', this.search, this);\n    this.view.on('menu-selected', this.applySearchFilter, this);\n    this.contentTypeList.on('row-selected', this.showDetailView, this);\n    this.contentTypeDetail.on('close', this.closeDetailView, this);\n\n    this.initContentTypeList();\n  }\n\n  /**\n   * Initiates the content type list with a search\n   */\n  initContentTypeList() {\n    // initialize by search\n    this.searchService.search(\"\")\n      .then(contentTypes => this.contentTypeList.update(contentTypes));\n  }\n\n  /**\n   * Executes a search and updates the content type list\n   *\n   * @param {string} query\n   */\n  search({query}) {\n    this.searchService.search(query)\n      .then(contentTypes => this.contentTypeList.update(contentTypes));\n  }\n\n  /**\n   * Should apply a search filter\n   */\n  applySearchFilter() {\n    console.debug('ContentTypeSection: menu was clicked!', event);\n  }\n\n  /**\n   * Shows detail view\n   *\n   * @param {string} id\n   */\n  showDetailView({id}) {\n    this.contentTypeList.hide();\n    this.contentTypeDetail.loadById(id);\n    this.contentTypeDetail.show();\n    this.fire('resize');\n  }\n\n\n  /**\n   * Close detail view\n   */\n  closeDetailView() {\n    this.contentTypeDetail.hide();\n    this.contentTypeList.show();\n    this.fire('resize');\n  }\n\n  /**\n   * Returns the element\n   *\n   * @return {HTMLElement}\n   */\n  getElement() {\n    return this.view.getElement();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/content-type-section/content-type-section.js","import {Eventful} from '../mixins/eventful';\n\n/**\n * @class ContentBrowserView\n * @mixes Eventful\n */\nexport default class ContentBrowserView {\n  /**\n   * @constructor\n   * @param {object} state\n   */\n  constructor(state) {\n    // add event system\n    Object.assign(this, Eventful());\n\n    // create elements\n    const menu = this.createMenuElement();\n    const inputGroup = this.createInputGroupElement();\n\n    // menu group\n    const menuGroup = document.createElement('div');\n    menuGroup.className = 'menu-group';\n    menuGroup.appendChild(menu);\n    menuGroup.appendChild(inputGroup);\n\n    // root element\n    this.rootElement  = document.createElement('div');\n    this.rootElement.appendChild(menuGroup);\n  }\n\n  /**\n   * Adds a menu item\n   *\n   * @param {string} text\n   *\n   * @return {HTMLElement}\n   */\n  addMenuItem(text) {\n    const element = document.createElement('li');\n    element.setAttribute('role', 'menuitem');\n    element.innerHTML = text;\n\n    element.addEventListener('click', event => {\n      this.fire('menu-selected', {\n        element: event.target\n      });\n    });\n\n    // sets first to be selected\n    if(this.menuBarElement.childElementCount < 1) {\n      element.setAttribute('aria-selected', 'true');\n    }\n\n    // add to menu bar\n    this.menuBarElement.appendChild(element);\n\n    return element;\n  }\n\n  /**\n   * Creates the menu bar element\n   *\n   * @return {Element}\n   */\n  createMenuElement() {\n    this.menuBarElement = document.createElement('ul');\n    this.menuBarElement.setAttribute('role', 'menubar');\n    this.menuBarElement.className = 'h5p-menu';\n\n    const navElement = document.createElement('nav');\n    navElement.appendChild(this.menuBarElement);\n\n    const title = document.createElement('div');\n    title.className = \"menu-title\";\n    title.innerHTML = \"Browse content types\";\n\n    const menu = document.createElement('div');\n    menu.className = \"menu\";\n    menu.appendChild(title);\n    menu.appendChild(navElement);\n\n    return menu;\n  }\n\n  /**\n   * Creates the input group used for search\n   *\n   * @return {HTMLElement}\n   */\n  createInputGroupElement() {\n    // input field\n    const inputField = document.createElement('input');\n    inputField.className = 'hub-search shadow';\n    inputField.setAttribute('type', 'text');\n    inputField.setAttribute('placeholder', \"Search for Content Types\");\n    inputField.addEventListener('keyup', event => {\n      this.fire('search', {\n        element: event.target,\n        query: event.target.value\n      });\n    });\n\n    // input button\n    const inputButton = document.createElement('div');\n    inputButton.className = 'input-button icon-search';\n\n    // input group\n    const inputGroup = document.createElement('div');\n    inputGroup.className = 'input-group rounded shadow';\n    inputGroup.appendChild(inputField);\n    inputGroup.appendChild(inputButton);\n\n    // wrapper\n    const inputGroupWrapper = document.createElement('div');\n    inputGroupWrapper.className = 'input-group-wrapper rounded';\n    inputGroupWrapper.appendChild(inputGroup);\n\n    return inputGroupWrapper;\n  }\n\n  /**\n   * Returns the root element of the content browser\n   *\n   * @return {HTMLElement}\n   */\n  getElement() {\n    return this.rootElement;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/content-type-section/content-type-section-view.js","/**\n * @mixin\n */\nexport const Eventful = () => ({\n  listeners: {},\n\n  /**\n   * Listen to event\n   *\n   * @param {string} type\n   * @param {function} listener\n   * @param {object} [scope]\n   *\n   * @function\n   */\n  on: function(type, listener, scope) {\n    /**\n     * @typedef {object} Trigger\n     * @property {function} listener\n     * @property {object} scope\n     */\n    const trigger = {\n      'listener': listener,\n      'scope': scope\n    };\n\n    this.listeners[type] = this.listeners[type] || [];\n    this.listeners[type].push(trigger);\n  },\n\n  /**\n   * Fire event. If any of the listeners returns false, return false\n   *\n   * @param {string} type\n   * @param {object} [event]\n   *\n   * @function\n   * @return {boolean}\n   */\n  fire: function(type, event) {\n    const triggers = this.listeners[type] || [];\n\n    return triggers.every(function(trigger) {\n      return trigger.listener.call(trigger.scope || this, event) !== false;\n    });\n  },\n\n  /**\n   * Listens for events on another Eventful, and propagate it trough this Eventful\n   *\n   * @param {string[]} types\n   * @param {Eventful} eventful\n   */\n  propagate: function(types, eventful) {\n    let self = this;\n    types.forEach(type => eventful.on(type, event => self.fire(type, event)));\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/mixins/eventful.js","import {curry, forEach, filter} from \"../../../node_modules/h5p-sdk/src/scripts/utils/functional\"\nimport HubServices from \"../hub-services\";\nimport lunr from \"../../../node_modules/lunr\"\n\nconst findContentTypeById = curry(function(contentTypes, id) {\n  return contentTypes.filter(contentType => contentType.id === id)[0];\n});\n\n/**\n * @class\n */\nexport default class SearchService {\n  /**\n   * @param {object} state\n   * @param {string} state.apiRootUrl\n   */\n  constructor(state) {\n    this.services = new HubServices({\n      apiRootUrl: state.apiRootUrl\n    });\n\n    // Set up lunr index\n    this.index = lunr(function() {\n      this.field('title', {boost: 100});\n      this.field('summary');\n      this.field('description');\n      this.field('keywords');\n      this.ref('id');\n    });\n\n    this.contentTypes = this.services.contentTypes(); // Get content types\n    this.contentTypes.then(forEach(this.addToIndex.bind(this))); // Add content types to search index\n  }\n\n  /**\n   * addToIndex - Adds a content type to the search index\n   *\n   * @param  {Object} contentType\n   */\n  addToIndex(contentType) {\n    this.index.add({\n      title: contentType.title,\n      summary: contentType.summary,\n      id: contentType.id\n    });\n  }\n\n  /**\n   * Performs a search\n   *\n   * @param {String} query\n   *\n   * @return {Promise<ContentType[]>}\n   */\n  search(query) {\n    // Display all content types by default\n    if (query === '') {\n      return this.contentTypes.then(contentTypes => contentTypes);\n    }\n\n    return this.contentTypes.then(contentTypes => {\n      return this.index.search(query)\n        .map(result => result.ref)\n        .map(findContentTypeById(contentTypes))\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/search-service/search-service.js","/**\n * @typedef {object} ContentType\n * @property {string} id\n * @property {string} title\n * @property {string} summary\n * @property {string} description\n * @property {string} icon\n * @property {string} created\n * @property {string} update\n * @property {boolean} recommended\n * @property {number} timesDownloaded\n * @property {string[]} screenshots\n * @property {string} exampleContent\n * @property {string[]} keywords\n * @property {string[]} categories\n * @property {string} license\n */\n\nexport default class HubServices {\n  /**\n   * @param {string} apiRootUrl\n   */\n  constructor({ apiRootUrl }) {\n    this.apiRootUrl = apiRootUrl;\n\n    if(!window.cachedContentTypes){\n      window.cachedContentTypes = fetch(`${this.apiRootUrl}content_type_cache`, {\n        method: 'GET',\n        credentials: 'include'\n      }).then(result => result.json()).then(json => json.libraries);\n    }\n\n  }\n\n  /**\n   * Returns a list of content types\n   *\n   * @return {Promise.<ContentType[]>}\n   */\n  contentTypes() {\n    return window.cachedContentTypes;\n  }\n\n  /**\n   * Returns a Content Type\n   *\n   * @param {string} id\n   *\n   * @return {Promise.<ContentType>}\n   */\n  contentType(id) {\n    return window.cachedContentTypes.then(contentTypes => {\n      return contentTypes.filter(contentType => contentType.id === id)[0];\n    });\n\n    /*return fetch(`${this.apiRootUrl}content_type_cache/${id}`, {\n      method: 'GET',\n      credentials: 'include'\n    }).then(result => result.json());*/\n  }\n\n  /**\n   * Installs a content type on the server\n   *\n   * @param {string} id\n   *\n   * @return {Promise.<ContentType>}\n   */\n  installContentType(id) {\n    return fetch(`${this.apiRootUrl}content_type_cache/${id}/install`, {\n      method: 'GET',\n      credentials: 'include'\n    }).then(result => result.json());\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/hub-services.js","/**\n * lunr - http://lunrjs.com - A bit like Solr, but much smaller and not as bright - 1.0.0\n * Copyright (C) 2017 Oliver Nightingale\n * @license MIT\n */\n\n;(function(){\n\n/**\n * Convenience function for instantiating a new lunr index and configuring it\n * with the default pipeline functions and the passed config function.\n *\n * When using this convenience function a new index will be created with the\n * following functions already in the pipeline:\n *\n * lunr.StopWordFilter - filters out any stop words before they enter the\n * index\n *\n * lunr.stemmer - stems the tokens before entering the index.\n *\n * Example:\n *\n *     var idx = lunr(function () {\n *       this.field('title', 10)\n *       this.field('tags', 100)\n *       this.field('body')\n *       \n *       this.ref('cid')\n *       \n *       this.pipeline.add(function () {\n *         // some custom pipeline function\n *       })\n *       \n *     })\n *\n * @param {Function} config A function that will be called with the new instance\n * of the lunr.Index as both its context and first parameter. It can be used to\n * customize the instance of new lunr.Index.\n * @namespace\n * @module\n * @returns {lunr.Index}\n *\n */\nvar lunr = function (config) {\n  var idx = new lunr.Index\n\n  idx.pipeline.add(\n    lunr.trimmer,\n    lunr.stopWordFilter,\n    lunr.stemmer\n  )\n\n  if (config) config.call(idx, idx)\n\n  return idx\n}\n\nlunr.version = \"1.0.0\"\n/*!\n * lunr.utils\n * Copyright (C) 2017 Oliver Nightingale\n */\n\n/**\n * A namespace containing utils for the rest of the lunr library\n */\nlunr.utils = {}\n\n/**\n * Print a warning message to the console.\n *\n * @param {String} message The message to be printed.\n * @memberOf Utils\n */\nlunr.utils.warn = (function (global) {\n  return function (message) {\n    if (global.console && console.warn) {\n      console.warn(message)\n    }\n  }\n})(this)\n\n/**\n * Convert an object to a string.\n *\n * In the case of `null` and `undefined` the function returns\n * the empty string, in all other cases the result of calling\n * `toString` on the passed object is returned.\n *\n * @param {Any} obj The object to convert to a string.\n * @return {String} string representation of the passed object.\n * @memberOf Utils\n */\nlunr.utils.asString = function (obj) {\n  if (obj === void 0 || obj === null) {\n    return \"\"\n  } else {\n    return obj.toString()\n  }\n}\n/*!\n * lunr.EventEmitter\n * Copyright (C) 2017 Oliver Nightingale\n */\n\n/**\n * lunr.EventEmitter is an event emitter for lunr. It manages adding and removing event handlers and triggering events and their handlers.\n *\n * @constructor\n */\nlunr.EventEmitter = function () {\n  this.events = {}\n}\n\n/**\n * Binds a handler function to a specific event(s).\n *\n * Can bind a single function to many different events in one call.\n *\n * @param {String} [eventName] The name(s) of events to bind this function to.\n * @param {Function} fn The function to call when an event is fired.\n * @memberOf EventEmitter\n */\nlunr.EventEmitter.prototype.addListener = function () {\n  var args = Array.prototype.slice.call(arguments),\n      fn = args.pop(),\n      names = args\n\n  if (typeof fn !== \"function\") throw new TypeError (\"last argument must be a function\")\n\n  names.forEach(function (name) {\n    if (!this.hasHandler(name)) this.events[name] = []\n    this.events[name].push(fn)\n  }, this)\n}\n\n/**\n * Removes a handler function from a specific event.\n *\n * @param {String} eventName The name of the event to remove this function from.\n * @param {Function} fn The function to remove from an event.\n * @memberOf EventEmitter\n */\nlunr.EventEmitter.prototype.removeListener = function (name, fn) {\n  if (!this.hasHandler(name)) return\n\n  var fnIndex = this.events[name].indexOf(fn)\n  this.events[name].splice(fnIndex, 1)\n\n  if (!this.events[name].length) delete this.events[name]\n}\n\n/**\n * Calls all functions bound to the given event.\n *\n * Additional data can be passed to the event handler as arguments to `emit`\n * after the event name.\n *\n * @param {String} eventName The name of the event to emit.\n * @memberOf EventEmitter\n */\nlunr.EventEmitter.prototype.emit = function (name) {\n  if (!this.hasHandler(name)) return\n\n  var args = Array.prototype.slice.call(arguments, 1)\n\n  this.events[name].forEach(function (fn) {\n    fn.apply(undefined, args)\n  })\n}\n\n/**\n * Checks whether a handler has ever been stored against an event.\n *\n * @param {String} eventName The name of the event to check.\n * @private\n * @memberOf EventEmitter\n */\nlunr.EventEmitter.prototype.hasHandler = function (name) {\n  return name in this.events\n}\n\n/*!\n * lunr.tokenizer\n * Copyright (C) 2017 Oliver Nightingale\n */\n\n/**\n * A function for splitting a string into tokens ready to be inserted into\n * the search index. Uses `lunr.tokenizer.separator` to split strings, change\n * the value of this property to change how strings are split into tokens.\n *\n * @module\n * @param {String} obj The string to convert into tokens\n * @see lunr.tokenizer.separator\n * @returns {Array}\n */\nlunr.tokenizer = function (obj) {\n  if (!arguments.length || obj == null || obj == undefined) return []\n  if (Array.isArray(obj)) return obj.map(function (t) { return lunr.utils.asString(t).toLowerCase() })\n\n  return obj.toString().trim().toLowerCase().split(lunr.tokenizer.separator)\n}\n\n/**\n * The sperator used to split a string into tokens. Override this property to change the behaviour of\n * `lunr.tokenizer` behaviour when tokenizing strings. By default this splits on whitespace and hyphens.\n *\n * @static\n * @see lunr.tokenizer\n */\nlunr.tokenizer.separator = /[\\s\\-]+/\n\n/**\n * Loads a previously serialised tokenizer.\n *\n * A tokenizer function to be loaded must already be registered with lunr.tokenizer.\n * If the serialised tokenizer has not been registered then an error will be thrown.\n *\n * @param {String} label The label of the serialised tokenizer.\n * @returns {Function}\n * @memberOf tokenizer\n */\nlunr.tokenizer.load = function (label) {\n  var fn = this.registeredFunctions[label]\n\n  if (!fn) {\n    throw new Error('Cannot load un-registered function: ' + label)\n  }\n\n  return fn\n}\n\nlunr.tokenizer.label = 'default'\n\nlunr.tokenizer.registeredFunctions = {\n  'default': lunr.tokenizer\n}\n\n/**\n * Register a tokenizer function.\n *\n * Functions that are used as tokenizers should be registered if they are to be used with a serialised index.\n *\n * Registering a function does not add it to an index, functions must still be associated with a specific index for them to be used when indexing and searching documents.\n *\n * @param {Function} fn The function to register.\n * @param {String} label The label to register this function with\n * @memberOf tokenizer\n */\nlunr.tokenizer.registerFunction = function (fn, label) {\n  if (label in this.registeredFunctions) {\n    lunr.utils.warn('Overwriting existing tokenizer: ' + label)\n  }\n\n  fn.label = label\n  this.registeredFunctions[label] = fn\n}\n/*!\n * lunr.Pipeline\n * Copyright (C) 2017 Oliver Nightingale\n */\n\n/**\n * lunr.Pipelines maintain an ordered list of functions to be applied to all\n * tokens in documents entering the search index and queries being ran against\n * the index.\n *\n * An instance of lunr.Index created with the lunr shortcut will contain a\n * pipeline with a stop word filter and an English language stemmer. Extra\n * functions can be added before or after either of these functions or these\n * default functions can be removed.\n *\n * When run the pipeline will call each function in turn, passing a token, the\n * index of that token in the original list of all tokens and finally a list of\n * all the original tokens.\n *\n * The output of functions in the pipeline will be passed to the next function\n * in the pipeline. To exclude a token from entering the index the function\n * should return undefined, the rest of the pipeline will not be called with\n * this token.\n *\n * For serialisation of pipelines to work, all functions used in an instance of\n * a pipeline should be registered with lunr.Pipeline. Registered functions can\n * then be loaded. If trying to load a serialised pipeline that uses functions\n * that are not registered an error will be thrown.\n *\n * If not planning on serialising the pipeline then registering pipeline functions\n * is not necessary.\n *\n * @constructor\n */\nlunr.Pipeline = function () {\n  this._stack = []\n}\n\nlunr.Pipeline.registeredFunctions = {}\n\n/**\n * Register a function with the pipeline.\n *\n * Functions that are used in the pipeline should be registered if the pipeline\n * needs to be serialised, or a serialised pipeline needs to be loaded.\n *\n * Registering a function does not add it to a pipeline, functions must still be\n * added to instances of the pipeline for them to be used when running a pipeline.\n *\n * @param {Function} fn The function to check for.\n * @param {String} label The label to register this function with\n * @memberOf Pipeline\n */\nlunr.Pipeline.registerFunction = function (fn, label) {\n  if (label in this.registeredFunctions) {\n    lunr.utils.warn('Overwriting existing registered function: ' + label)\n  }\n\n  fn.label = label\n  lunr.Pipeline.registeredFunctions[fn.label] = fn\n}\n\n/**\n * Warns if the function is not registered as a Pipeline function.\n *\n * @param {Function} fn The function to check for.\n * @private\n * @memberOf Pipeline\n */\nlunr.Pipeline.warnIfFunctionNotRegistered = function (fn) {\n  var isRegistered = fn.label && (fn.label in this.registeredFunctions)\n\n  if (!isRegistered) {\n    lunr.utils.warn('Function is not registered with pipeline. This may cause problems when serialising the index.\\n', fn)\n  }\n}\n\n/**\n * Loads a previously serialised pipeline.\n *\n * All functions to be loaded must already be registered with lunr.Pipeline.\n * If any function from the serialised data has not been registered then an\n * error will be thrown.\n *\n * @param {Object} serialised The serialised pipeline to load.\n * @returns {lunr.Pipeline}\n * @memberOf Pipeline\n */\nlunr.Pipeline.load = function (serialised) {\n  var pipeline = new lunr.Pipeline\n\n  serialised.forEach(function (fnName) {\n    var fn = lunr.Pipeline.registeredFunctions[fnName]\n\n    if (fn) {\n      pipeline.add(fn)\n    } else {\n      throw new Error('Cannot load un-registered function: ' + fnName)\n    }\n  })\n\n  return pipeline\n}\n\n/**\n * Adds new functions to the end of the pipeline.\n *\n * Logs a warning if the function has not been registered.\n *\n * @param {Function} functions Any number of functions to add to the pipeline.\n * @memberOf Pipeline\n */\nlunr.Pipeline.prototype.add = function () {\n  var fns = Array.prototype.slice.call(arguments)\n\n  fns.forEach(function (fn) {\n    lunr.Pipeline.warnIfFunctionNotRegistered(fn)\n    this._stack.push(fn)\n  }, this)\n}\n\n/**\n * Adds a single function after a function that already exists in the\n * pipeline.\n *\n * Logs a warning if the function has not been registered.\n *\n * @param {Function} existingFn A function that already exists in the pipeline.\n * @param {Function} newFn The new function to add to the pipeline.\n * @memberOf Pipeline\n */\nlunr.Pipeline.prototype.after = function (existingFn, newFn) {\n  lunr.Pipeline.warnIfFunctionNotRegistered(newFn)\n\n  var pos = this._stack.indexOf(existingFn)\n  if (pos == -1) {\n    throw new Error('Cannot find existingFn')\n  }\n\n  pos = pos + 1\n  this._stack.splice(pos, 0, newFn)\n}\n\n/**\n * Adds a single function before a function that already exists in the\n * pipeline.\n *\n * Logs a warning if the function has not been registered.\n *\n * @param {Function} existingFn A function that already exists in the pipeline.\n * @param {Function} newFn The new function to add to the pipeline.\n * @memberOf Pipeline\n */\nlunr.Pipeline.prototype.before = function (existingFn, newFn) {\n  lunr.Pipeline.warnIfFunctionNotRegistered(newFn)\n\n  var pos = this._stack.indexOf(existingFn)\n  if (pos == -1) {\n    throw new Error('Cannot find existingFn')\n  }\n\n  this._stack.splice(pos, 0, newFn)\n}\n\n/**\n * Removes a function from the pipeline.\n *\n * @param {Function} fn The function to remove from the pipeline.\n * @memberOf Pipeline\n */\nlunr.Pipeline.prototype.remove = function (fn) {\n  var pos = this._stack.indexOf(fn)\n  if (pos == -1) {\n    return\n  }\n\n  this._stack.splice(pos, 1)\n}\n\n/**\n * Runs the current list of functions that make up the pipeline against the\n * passed tokens.\n *\n * @param {Array} tokens The tokens to run through the pipeline.\n * @returns {Array}\n * @memberOf Pipeline\n */\nlunr.Pipeline.prototype.run = function (tokens) {\n  var out = [],\n      tokenLength = tokens.length,\n      stackLength = this._stack.length\n\n  for (var i = 0; i < tokenLength; i++) {\n    var token = tokens[i]\n\n    for (var j = 0; j < stackLength; j++) {\n      token = this._stack[j](token, i, tokens)\n      if (token === void 0 || token === '') break\n    };\n\n    if (token !== void 0 && token !== '') out.push(token)\n  };\n\n  return out\n}\n\n/**\n * Resets the pipeline by removing any existing processors.\n *\n * @memberOf Pipeline\n */\nlunr.Pipeline.prototype.reset = function () {\n  this._stack = []\n}\n\n/**\n * Returns a representation of the pipeline ready for serialisation.\n *\n * Logs a warning if the function has not been registered.\n *\n * @returns {Array}\n * @memberOf Pipeline\n */\nlunr.Pipeline.prototype.toJSON = function () {\n  return this._stack.map(function (fn) {\n    lunr.Pipeline.warnIfFunctionNotRegistered(fn)\n\n    return fn.label\n  })\n}\n/*!\n * lunr.Vector\n * Copyright (C) 2017 Oliver Nightingale\n */\n\n/**\n * lunr.Vectors implement vector related operations for\n * a series of elements.\n *\n * @constructor\n */\nlunr.Vector = function () {\n  this._magnitude = null\n  this.list = undefined\n  this.length = 0\n}\n\n/**\n * lunr.Vector.Node is a simple struct for each node\n * in a lunr.Vector.\n *\n * @private\n * @param {Number} The index of the node in the vector.\n * @param {Object} The data at this node in the vector.\n * @param {lunr.Vector.Node} The node directly after this node in the vector.\n * @constructor\n * @memberOf Vector\n */\nlunr.Vector.Node = function (idx, val, next) {\n  this.idx = idx\n  this.val = val\n  this.next = next\n}\n\n/**\n * Inserts a new value at a position in a vector.\n *\n * @param {Number} The index at which to insert a value.\n * @param {Object} The object to insert in the vector.\n * @memberOf Vector.\n */\nlunr.Vector.prototype.insert = function (idx, val) {\n  this._magnitude = undefined;\n  var list = this.list\n\n  if (!list) {\n    this.list = new lunr.Vector.Node (idx, val, list)\n    return this.length++\n  }\n\n  if (idx < list.idx) {\n    this.list = new lunr.Vector.Node (idx, val, list)\n    return this.length++\n  }\n\n  var prev = list,\n      next = list.next\n\n  while (next != undefined) {\n    if (idx < next.idx) {\n      prev.next = new lunr.Vector.Node (idx, val, next)\n      return this.length++\n    }\n\n    prev = next, next = next.next\n  }\n\n  prev.next = new lunr.Vector.Node (idx, val, next)\n  return this.length++\n}\n\n/**\n * Calculates the magnitude of this vector.\n *\n * @returns {Number}\n * @memberOf Vector\n */\nlunr.Vector.prototype.magnitude = function () {\n  if (this._magnitude) return this._magnitude\n  var node = this.list,\n      sumOfSquares = 0,\n      val\n\n  while (node) {\n    val = node.val\n    sumOfSquares += val * val\n    node = node.next\n  }\n\n  return this._magnitude = Math.sqrt(sumOfSquares)\n}\n\n/**\n * Calculates the dot product of this vector and another vector.\n *\n * @param {lunr.Vector} otherVector The vector to compute the dot product with.\n * @returns {Number}\n * @memberOf Vector\n */\nlunr.Vector.prototype.dot = function (otherVector) {\n  var node = this.list,\n      otherNode = otherVector.list,\n      dotProduct = 0\n\n  while (node && otherNode) {\n    if (node.idx < otherNode.idx) {\n      node = node.next\n    } else if (node.idx > otherNode.idx) {\n      otherNode = otherNode.next\n    } else {\n      dotProduct += node.val * otherNode.val\n      node = node.next\n      otherNode = otherNode.next\n    }\n  }\n\n  return dotProduct\n}\n\n/**\n * Calculates the cosine similarity between this vector and another\n * vector.\n *\n * @param {lunr.Vector} otherVector The other vector to calculate the\n * similarity with.\n * @returns {Number}\n * @memberOf Vector\n */\nlunr.Vector.prototype.similarity = function (otherVector) {\n  return this.dot(otherVector) / (this.magnitude() * otherVector.magnitude())\n}\n/*!\n * lunr.SortedSet\n * Copyright (C) 2017 Oliver Nightingale\n */\n\n/**\n * lunr.SortedSets are used to maintain an array of uniq values in a sorted\n * order.\n *\n * @constructor\n */\nlunr.SortedSet = function () {\n  this.length = 0\n  this.elements = []\n}\n\n/**\n * Loads a previously serialised sorted set.\n *\n * @param {Array} serialisedData The serialised set to load.\n * @returns {lunr.SortedSet}\n * @memberOf SortedSet\n */\nlunr.SortedSet.load = function (serialisedData) {\n  var set = new this\n\n  set.elements = serialisedData\n  set.length = serialisedData.length\n\n  return set\n}\n\n/**\n * Inserts new items into the set in the correct position to maintain the\n * order.\n *\n * @param {Object} The objects to add to this set.\n * @memberOf SortedSet\n */\nlunr.SortedSet.prototype.add = function () {\n  var i, element\n\n  for (i = 0; i < arguments.length; i++) {\n    element = arguments[i]\n    if (~this.indexOf(element)) continue\n    this.elements.splice(this.locationFor(element), 0, element)\n  }\n\n  this.length = this.elements.length\n}\n\n/**\n * Converts this sorted set into an array.\n *\n * @returns {Array}\n * @memberOf SortedSet\n */\nlunr.SortedSet.prototype.toArray = function () {\n  return this.elements.slice()\n}\n\n/**\n * Creates a new array with the results of calling a provided function on every\n * element in this sorted set.\n *\n * Delegates to Array.prototype.map and has the same signature.\n *\n * @param {Function} fn The function that is called on each element of the\n * set.\n * @param {Object} ctx An optional object that can be used as the context\n * for the function fn.\n * @returns {Array}\n * @memberOf SortedSet\n */\nlunr.SortedSet.prototype.map = function (fn, ctx) {\n  return this.elements.map(fn, ctx)\n}\n\n/**\n * Executes a provided function once per sorted set element.\n *\n * Delegates to Array.prototype.forEach and has the same signature.\n *\n * @param {Function} fn The function that is called on each element of the\n * set.\n * @param {Object} ctx An optional object that can be used as the context\n * @memberOf SortedSet\n * for the function fn.\n */\nlunr.SortedSet.prototype.forEach = function (fn, ctx) {\n  return this.elements.forEach(fn, ctx)\n}\n\n/**\n * Returns the index at which a given element can be found in the\n * sorted set, or -1 if it is not present.\n *\n * @param {Object} elem The object to locate in the sorted set.\n * @returns {Number}\n * @memberOf SortedSet\n */\nlunr.SortedSet.prototype.indexOf = function (elem) {\n  var start = 0,\n      end = this.elements.length,\n      sectionLength = end - start,\n      pivot = start + Math.floor(sectionLength / 2),\n      pivotElem = this.elements[pivot]\n\n  while (sectionLength > 1) {\n    if (pivotElem === elem) return pivot\n\n    if (pivotElem < elem) start = pivot\n    if (pivotElem > elem) end = pivot\n\n    sectionLength = end - start\n    pivot = start + Math.floor(sectionLength / 2)\n    pivotElem = this.elements[pivot]\n  }\n\n  if (pivotElem === elem) return pivot\n\n  return -1\n}\n\n/**\n * Returns the position within the sorted set that an element should be\n * inserted at to maintain the current order of the set.\n *\n * This function assumes that the element to search for does not already exist\n * in the sorted set.\n *\n * @param {Object} elem The elem to find the position for in the set\n * @returns {Number}\n * @memberOf SortedSet\n */\nlunr.SortedSet.prototype.locationFor = function (elem) {\n  var start = 0,\n      end = this.elements.length,\n      sectionLength = end - start,\n      pivot = start + Math.floor(sectionLength / 2),\n      pivotElem = this.elements[pivot]\n\n  while (sectionLength > 1) {\n    if (pivotElem < elem) start = pivot\n    if (pivotElem > elem) end = pivot\n\n    sectionLength = end - start\n    pivot = start + Math.floor(sectionLength / 2)\n    pivotElem = this.elements[pivot]\n  }\n\n  if (pivotElem > elem) return pivot\n  if (pivotElem < elem) return pivot + 1\n}\n\n/**\n * Creates a new lunr.SortedSet that contains the elements in the intersection\n * of this set and the passed set.\n *\n * @param {lunr.SortedSet} otherSet The set to intersect with this set.\n * @returns {lunr.SortedSet}\n * @memberOf SortedSet\n */\nlunr.SortedSet.prototype.intersect = function (otherSet) {\n  var intersectSet = new lunr.SortedSet,\n      i = 0, j = 0,\n      a_len = this.length, b_len = otherSet.length,\n      a = this.elements, b = otherSet.elements\n\n  while (true) {\n    if (i > a_len - 1 || j > b_len - 1) break\n\n    if (a[i] === b[j]) {\n      intersectSet.add(a[i])\n      i++, j++\n      continue\n    }\n\n    if (a[i] < b[j]) {\n      i++\n      continue\n    }\n\n    if (a[i] > b[j]) {\n      j++\n      continue\n    }\n  };\n\n  return intersectSet\n}\n\n/**\n * Makes a copy of this set\n *\n * @returns {lunr.SortedSet}\n * @memberOf SortedSet\n */\nlunr.SortedSet.prototype.clone = function () {\n  var clone = new lunr.SortedSet\n\n  clone.elements = this.toArray()\n  clone.length = clone.elements.length\n\n  return clone\n}\n\n/**\n * Creates a new lunr.SortedSet that contains the elements in the union\n * of this set and the passed set.\n *\n * @param {lunr.SortedSet} otherSet The set to union with this set.\n * @returns {lunr.SortedSet}\n * @memberOf SortedSet\n */\nlunr.SortedSet.prototype.union = function (otherSet) {\n  var longSet, shortSet, unionSet\n\n  if (this.length >= otherSet.length) {\n    longSet = this, shortSet = otherSet\n  } else {\n    longSet = otherSet, shortSet = this\n  }\n\n  unionSet = longSet.clone()\n\n  for(var i = 0, shortSetElements = shortSet.toArray(); i < shortSetElements.length; i++){\n    unionSet.add(shortSetElements[i])\n  }\n\n  return unionSet\n}\n\n/**\n * Returns a representation of the sorted set ready for serialisation.\n *\n * @returns {Array}\n * @memberOf SortedSet\n */\nlunr.SortedSet.prototype.toJSON = function () {\n  return this.toArray()\n}\n/*!\n * lunr.Index\n * Copyright (C) 2017 Oliver Nightingale\n */\n\n/**\n * lunr.Index is object that manages a search index.  It contains the indexes\n * and stores all the tokens and document lookups.  It also provides the main\n * user facing API for the library.\n *\n * @constructor\n */\nlunr.Index = function () {\n  this._fields = []\n  this._ref = 'id'\n  this.pipeline = new lunr.Pipeline\n  this.documentStore = new lunr.Store\n  this.tokenStore = new lunr.TokenStore\n  this.corpusTokens = new lunr.SortedSet\n  this.eventEmitter =  new lunr.EventEmitter\n  this.tokenizerFn = lunr.tokenizer\n\n  this._idfCache = {}\n\n  this.on('add', 'remove', 'update', (function () {\n    this._idfCache = {}\n  }).bind(this))\n}\n\n/**\n * Bind a handler to events being emitted by the index.\n *\n * The handler can be bound to many events at the same time.\n *\n * @param {String} [eventName] The name(s) of events to bind the function to.\n * @param {Function} fn The serialised set to load.\n * @memberOf Index\n */\nlunr.Index.prototype.on = function () {\n  var args = Array.prototype.slice.call(arguments)\n  return this.eventEmitter.addListener.apply(this.eventEmitter, args)\n}\n\n/**\n * Removes a handler from an event being emitted by the index.\n *\n * @param {String} eventName The name of events to remove the function from.\n * @param {Function} fn The serialised set to load.\n * @memberOf Index\n */\nlunr.Index.prototype.off = function (name, fn) {\n  return this.eventEmitter.removeListener(name, fn)\n}\n\n/**\n * Loads a previously serialised index.\n *\n * Issues a warning if the index being imported was serialised\n * by a different version of lunr.\n *\n * @param {Object} serialisedData The serialised set to load.\n * @returns {lunr.Index}\n * @memberOf Index\n */\nlunr.Index.load = function (serialisedData) {\n  if (serialisedData.version !== lunr.version) {\n    lunr.utils.warn('version mismatch: current ' + lunr.version + ' importing ' + serialisedData.version)\n  }\n\n  var idx = new this\n\n  idx._fields = serialisedData.fields\n  idx._ref = serialisedData.ref\n\n  idx.tokenizer(lunr.tokenizer.load(serialisedData.tokenizer))\n  idx.documentStore = lunr.Store.load(serialisedData.documentStore)\n  idx.tokenStore = lunr.TokenStore.load(serialisedData.tokenStore)\n  idx.corpusTokens = lunr.SortedSet.load(serialisedData.corpusTokens)\n  idx.pipeline = lunr.Pipeline.load(serialisedData.pipeline)\n\n  return idx\n}\n\n/**\n * Adds a field to the list of fields that will be searchable within documents\n * in the index.\n *\n * An optional boost param can be passed to affect how much tokens in this field\n * rank in search results, by default the boost value is 1.\n *\n * Fields should be added before any documents are added to the index, fields\n * that are added after documents are added to the index will only apply to new\n * documents added to the index.\n *\n * @param {String} fieldName The name of the field within the document that\n * should be indexed\n * @param {Number} boost An optional boost that can be applied to terms in this\n * field.\n * @returns {lunr.Index}\n * @memberOf Index\n */\nlunr.Index.prototype.field = function (fieldName, opts) {\n  var opts = opts || {},\n      field = { name: fieldName, boost: opts.boost || 1 }\n\n  this._fields.push(field)\n  return this\n}\n\n/**\n * Sets the property used to uniquely identify documents added to the index,\n * by default this property is 'id'.\n *\n * This should only be changed before adding documents to the index, changing\n * the ref property without resetting the index can lead to unexpected results.\n *\n * The value of ref can be of any type but it _must_ be stably comparable and\n * orderable.\n *\n * @param {String} refName The property to use to uniquely identify the\n * documents in the index.\n * @param {Boolean} emitEvent Whether to emit add events, defaults to true\n * @returns {lunr.Index}\n * @memberOf Index\n */\nlunr.Index.prototype.ref = function (refName) {\n  this._ref = refName\n  return this\n}\n\n/**\n * Sets the tokenizer used for this index.\n *\n * By default the index will use the default tokenizer, lunr.tokenizer. The tokenizer\n * should only be changed before adding documents to the index. Changing the tokenizer\n * without re-building the index can lead to unexpected results.\n *\n * @param {Function} fn The function to use as a tokenizer.\n * @returns {lunr.Index}\n * @memberOf Index\n */\nlunr.Index.prototype.tokenizer = function (fn) {\n  var isRegistered = fn.label && (fn.label in lunr.tokenizer.registeredFunctions)\n\n  if (!isRegistered) {\n    lunr.utils.warn('Function is not a registered tokenizer. This may cause problems when serialising the index')\n  }\n\n  this.tokenizerFn = fn\n  return this\n}\n\n/**\n * Add a document to the index.\n *\n * This is the way new documents enter the index, this function will run the\n * fields from the document through the index's pipeline and then add it to\n * the index, it will then show up in search results.\n *\n * An 'add' event is emitted with the document that has been added and the index\n * the document has been added to. This event can be silenced by passing false\n * as the second argument to add.\n *\n * @param {Object} doc The document to add to the index.\n * @param {Boolean} emitEvent Whether or not to emit events, default true.\n * @memberOf Index\n */\nlunr.Index.prototype.add = function (doc, emitEvent) {\n  var docTokens = {},\n      allDocumentTokens = new lunr.SortedSet,\n      docRef = doc[this._ref],\n      emitEvent = emitEvent === undefined ? true : emitEvent\n\n  this._fields.forEach(function (field) {\n    var fieldTokens = this.pipeline.run(this.tokenizerFn(doc[field.name]))\n\n    docTokens[field.name] = fieldTokens\n\n    for (var i = 0; i < fieldTokens.length; i++) {\n      var token = fieldTokens[i]\n      allDocumentTokens.add(token)\n      this.corpusTokens.add(token)\n    }\n  }, this)\n\n  this.documentStore.set(docRef, allDocumentTokens)\n\n  for (var i = 0; i < allDocumentTokens.length; i++) {\n    var token = allDocumentTokens.elements[i]\n    var tf = 0;\n\n    for (var j = 0; j < this._fields.length; j++){\n      var field = this._fields[j]\n      var fieldTokens = docTokens[field.name]\n      var fieldLength = fieldTokens.length\n\n      if (!fieldLength) continue\n\n      var tokenCount = 0\n      for (var k = 0; k < fieldLength; k++){\n        if (fieldTokens[k] === token){\n          tokenCount++\n        }\n      }\n\n      tf += (tokenCount / fieldLength * field.boost)\n    }\n\n    this.tokenStore.add(token, { ref: docRef, tf: tf })\n  };\n\n  if (emitEvent) this.eventEmitter.emit('add', doc, this)\n}\n\n/**\n * Removes a document from the index.\n *\n * To make sure documents no longer show up in search results they can be\n * removed from the index using this method.\n *\n * The document passed only needs to have the same ref property value as the\n * document that was added to the index, they could be completely different\n * objects.\n *\n * A 'remove' event is emitted with the document that has been removed and the index\n * the document has been removed from. This event can be silenced by passing false\n * as the second argument to remove.\n *\n * @param {Object} doc The document to remove from the index.\n * @param {Boolean} emitEvent Whether to emit remove events, defaults to true\n * @memberOf Index\n */\nlunr.Index.prototype.remove = function (doc, emitEvent) {\n  var docRef = doc[this._ref],\n      emitEvent = emitEvent === undefined ? true : emitEvent\n\n  if (!this.documentStore.has(docRef)) return\n\n  var docTokens = this.documentStore.get(docRef)\n\n  this.documentStore.remove(docRef)\n\n  docTokens.forEach(function (token) {\n    this.tokenStore.remove(token, docRef)\n  }, this)\n\n  if (emitEvent) this.eventEmitter.emit('remove', doc, this)\n}\n\n/**\n * Updates a document in the index.\n *\n * When a document contained within the index gets updated, fields changed,\n * added or removed, to make sure it correctly matched against search queries,\n * it should be updated in the index.\n *\n * This method is just a wrapper around `remove` and `add`\n *\n * An 'update' event is emitted with the document that has been updated and the index.\n * This event can be silenced by passing false as the second argument to update. Only\n * an update event will be fired, the 'add' and 'remove' events of the underlying calls\n * are silenced.\n *\n * @param {Object} doc The document to update in the index.\n * @param {Boolean} emitEvent Whether to emit update events, defaults to true\n * @see Index.prototype.remove\n * @see Index.prototype.add\n * @memberOf Index\n */\nlunr.Index.prototype.update = function (doc, emitEvent) {\n  var emitEvent = emitEvent === undefined ? true : emitEvent\n\n  this.remove(doc, false)\n  this.add(doc, false)\n\n  if (emitEvent) this.eventEmitter.emit('update', doc, this)\n}\n\n/**\n * Calculates the inverse document frequency for a token within the index.\n *\n * @param {String} token The token to calculate the idf of.\n * @see Index.prototype.idf\n * @private\n * @memberOf Index\n */\nlunr.Index.prototype.idf = function (term) {\n  var cacheKey = \"@\" + term\n  if (Object.prototype.hasOwnProperty.call(this._idfCache, cacheKey)) return this._idfCache[cacheKey]\n\n  var documentFrequency = this.tokenStore.count(term),\n      idf = 1\n\n  if (documentFrequency > 0) {\n    idf = 1 + Math.log(this.documentStore.length / documentFrequency)\n  }\n\n  return this._idfCache[cacheKey] = idf\n}\n\n/**\n * Searches the index using the passed query.\n *\n * Queries should be a string, multiple words are allowed and will lead to an\n * AND based query, e.g. `idx.search('foo bar')` will run a search for\n * documents containing both 'foo' and 'bar'.\n *\n * All query tokens are passed through the same pipeline that document tokens\n * are passed through, so any language processing involved will be run on every\n * query term.\n *\n * Each query term is expanded, so that the term 'he' might be expanded to\n * 'hello' and 'help' if those terms were already included in the index.\n *\n * Matching documents are returned as an array of objects, each object contains\n * the matching document ref, as set for this index, and the similarity score\n * for this document against the query.\n *\n * @param {String} query The query to search the index with.\n * @returns {Object}\n * @see Index.prototype.idf\n * @see Index.prototype.documentVector\n * @memberOf Index\n */\nlunr.Index.prototype.search = function (query) {\n  var queryTokens = this.pipeline.run(this.tokenizerFn(query)),\n      queryVector = new lunr.Vector,\n      documentSets = [],\n      fieldBoosts = this._fields.reduce(function (memo, f) { return memo + f.boost }, 0)\n\n  var hasSomeToken = queryTokens.some(function (token) {\n    return this.tokenStore.has(token)\n  }, this)\n\n  if (!hasSomeToken) return []\n\n  queryTokens\n    .forEach(function (token, i, tokens) {\n      var tf = 1 / tokens.length * this._fields.length * fieldBoosts,\n          self = this\n\n      var set = this.tokenStore.expand(token).reduce(function (memo, key) {\n        var pos = self.corpusTokens.indexOf(key),\n            idf = self.idf(key),\n            similarityBoost = 1,\n            set = new lunr.SortedSet\n\n        // if the expanded key is not an exact match to the token then\n        // penalise the score for this key by how different the key is\n        // to the token.\n        if (key !== token) {\n          var diff = Math.max(3, key.length - token.length)\n          similarityBoost = 1 / Math.log(diff)\n        }\n\n        // calculate the query tf-idf score for this token\n        // applying an similarityBoost to ensure exact matches\n        // these rank higher than expanded terms\n        if (pos > -1) queryVector.insert(pos, tf * idf * similarityBoost)\n\n        // add all the documents that have this key into a set\n        // ensuring that the type of key is preserved\n        var matchingDocuments = self.tokenStore.get(key),\n            refs = Object.keys(matchingDocuments),\n            refsLen = refs.length\n\n        for (var i = 0; i < refsLen; i++) {\n          set.add(matchingDocuments[refs[i]].ref)\n        }\n\n        return memo.union(set)\n      }, new lunr.SortedSet)\n\n      documentSets.push(set)\n    }, this)\n\n  var documentSet = documentSets.reduce(function (memo, set) {\n    return memo.intersect(set)\n  })\n\n  return documentSet\n    .map(function (ref) {\n      return { ref: ref, score: queryVector.similarity(this.documentVector(ref)) }\n    }, this)\n    .sort(function (a, b) {\n      return b.score - a.score\n    })\n}\n\n/**\n * Generates a vector containing all the tokens in the document matching the\n * passed documentRef.\n *\n * The vector contains the tf-idf score for each token contained in the\n * document with the passed documentRef.  The vector will contain an element\n * for every token in the indexes corpus, if the document does not contain that\n * token the element will be 0.\n *\n * @param {Object} documentRef The ref to find the document with.\n * @returns {lunr.Vector}\n * @private\n * @memberOf Index\n */\nlunr.Index.prototype.documentVector = function (documentRef) {\n  var documentTokens = this.documentStore.get(documentRef),\n      documentTokensLength = documentTokens.length,\n      documentVector = new lunr.Vector\n\n  for (var i = 0; i < documentTokensLength; i++) {\n    var token = documentTokens.elements[i],\n        tf = this.tokenStore.get(token)[documentRef].tf,\n        idf = this.idf(token)\n\n    documentVector.insert(this.corpusTokens.indexOf(token), tf * idf)\n  };\n\n  return documentVector\n}\n\n/**\n * Returns a representation of the index ready for serialisation.\n *\n * @returns {Object}\n * @memberOf Index\n */\nlunr.Index.prototype.toJSON = function () {\n  return {\n    version: lunr.version,\n    fields: this._fields,\n    ref: this._ref,\n    tokenizer: this.tokenizerFn.label,\n    documentStore: this.documentStore.toJSON(),\n    tokenStore: this.tokenStore.toJSON(),\n    corpusTokens: this.corpusTokens.toJSON(),\n    pipeline: this.pipeline.toJSON()\n  }\n}\n\n/**\n * Applies a plugin to the current index.\n *\n * A plugin is a function that is called with the index as its context.\n * Plugins can be used to customise or extend the behaviour the index\n * in some way. A plugin is just a function, that encapsulated the custom\n * behaviour that should be applied to the index.\n *\n * The plugin function will be called with the index as its argument, additional\n * arguments can also be passed when calling use. The function will be called\n * with the index as its context.\n *\n * Example:\n *\n *     var myPlugin = function (idx, arg1, arg2) {\n *       // `this` is the index to be extended\n *       // apply any extensions etc here.\n *     }\n *\n *     var idx = lunr(function () {\n *       this.use(myPlugin, 'arg1', 'arg2')\n *     })\n *\n * @param {Function} plugin The plugin to apply.\n * @memberOf Index\n */\nlunr.Index.prototype.use = function (plugin) {\n  var args = Array.prototype.slice.call(arguments, 1)\n  args.unshift(this)\n  plugin.apply(this, args)\n}\n/*!\n * lunr.Store\n * Copyright (C) 2017 Oliver Nightingale\n */\n\n/**\n * lunr.Store is a simple key-value store used for storing sets of tokens for\n * documents stored in index.\n *\n * @constructor\n * @module\n */\nlunr.Store = function () {\n  this.store = {}\n  this.length = 0\n}\n\n/**\n * Loads a previously serialised store\n *\n * @param {Object} serialisedData The serialised store to load.\n * @returns {lunr.Store}\n * @memberOf Store\n */\nlunr.Store.load = function (serialisedData) {\n  var store = new this\n\n  store.length = serialisedData.length\n  store.store = Object.keys(serialisedData.store).reduce(function (memo, key) {\n    memo[key] = lunr.SortedSet.load(serialisedData.store[key])\n    return memo\n  }, {})\n\n  return store\n}\n\n/**\n * Stores the given tokens in the store against the given id.\n *\n * @param {Object} id The key used to store the tokens against.\n * @param {Object} tokens The tokens to store against the key.\n * @memberOf Store\n */\nlunr.Store.prototype.set = function (id, tokens) {\n  if (!this.has(id)) this.length++\n  this.store[id] = tokens\n}\n\n/**\n * Retrieves the tokens from the store for a given key.\n *\n * @param {Object} id The key to lookup and retrieve from the store.\n * @returns {Object}\n * @memberOf Store\n */\nlunr.Store.prototype.get = function (id) {\n  return this.store[id]\n}\n\n/**\n * Checks whether the store contains a key.\n *\n * @param {Object} id The id to look up in the store.\n * @returns {Boolean}\n * @memberOf Store\n */\nlunr.Store.prototype.has = function (id) {\n  return id in this.store\n}\n\n/**\n * Removes the value for a key in the store.\n *\n * @param {Object} id The id to remove from the store.\n * @memberOf Store\n */\nlunr.Store.prototype.remove = function (id) {\n  if (!this.has(id)) return\n\n  delete this.store[id]\n  this.length--\n}\n\n/**\n * Returns a representation of the store ready for serialisation.\n *\n * @returns {Object}\n * @memberOf Store\n */\nlunr.Store.prototype.toJSON = function () {\n  return {\n    store: this.store,\n    length: this.length\n  }\n}\n\n/*!\n * lunr.stemmer\n * Copyright (C) 2017 Oliver Nightingale\n * Includes code from - http://tartarus.org/~martin/PorterStemmer/js.txt\n */\n\n/**\n * lunr.stemmer is an english language stemmer, this is a JavaScript\n * implementation of the PorterStemmer taken from http://tartarus.org/~martin\n *\n * @module\n * @param {String} str The string to stem\n * @returns {String}\n * @see lunr.Pipeline\n */\nlunr.stemmer = (function(){\n  var step2list = {\n      \"ational\" : \"ate\",\n      \"tional\" : \"tion\",\n      \"enci\" : \"ence\",\n      \"anci\" : \"ance\",\n      \"izer\" : \"ize\",\n      \"bli\" : \"ble\",\n      \"alli\" : \"al\",\n      \"entli\" : \"ent\",\n      \"eli\" : \"e\",\n      \"ousli\" : \"ous\",\n      \"ization\" : \"ize\",\n      \"ation\" : \"ate\",\n      \"ator\" : \"ate\",\n      \"alism\" : \"al\",\n      \"iveness\" : \"ive\",\n      \"fulness\" : \"ful\",\n      \"ousness\" : \"ous\",\n      \"aliti\" : \"al\",\n      \"iviti\" : \"ive\",\n      \"biliti\" : \"ble\",\n      \"logi\" : \"log\"\n    },\n\n    step3list = {\n      \"icate\" : \"ic\",\n      \"ative\" : \"\",\n      \"alize\" : \"al\",\n      \"iciti\" : \"ic\",\n      \"ical\" : \"ic\",\n      \"ful\" : \"\",\n      \"ness\" : \"\"\n    },\n\n    c = \"[^aeiou]\",          // consonant\n    v = \"[aeiouy]\",          // vowel\n    C = c + \"[^aeiouy]*\",    // consonant sequence\n    V = v + \"[aeiou]*\",      // vowel sequence\n\n    mgr0 = \"^(\" + C + \")?\" + V + C,               // [C]VC... is m>0\n    meq1 = \"^(\" + C + \")?\" + V + C + \"(\" + V + \")?$\",  // [C]VC[V] is m=1\n    mgr1 = \"^(\" + C + \")?\" + V + C + V + C,       // [C]VCVC... is m>1\n    s_v = \"^(\" + C + \")?\" + v;                   // vowel in stem\n\n  var re_mgr0 = new RegExp(mgr0);\n  var re_mgr1 = new RegExp(mgr1);\n  var re_meq1 = new RegExp(meq1);\n  var re_s_v = new RegExp(s_v);\n\n  var re_1a = /^(.+?)(ss|i)es$/;\n  var re2_1a = /^(.+?)([^s])s$/;\n  var re_1b = /^(.+?)eed$/;\n  var re2_1b = /^(.+?)(ed|ing)$/;\n  var re_1b_2 = /.$/;\n  var re2_1b_2 = /(at|bl|iz)$/;\n  var re3_1b_2 = new RegExp(\"([^aeiouylsz])\\\\1$\");\n  var re4_1b_2 = new RegExp(\"^\" + C + v + \"[^aeiouwxy]$\");\n\n  var re_1c = /^(.+?[^aeiou])y$/;\n  var re_2 = /^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/;\n\n  var re_3 = /^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/;\n\n  var re_4 = /^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/;\n  var re2_4 = /^(.+?)(s|t)(ion)$/;\n\n  var re_5 = /^(.+?)e$/;\n  var re_5_1 = /ll$/;\n  var re3_5 = new RegExp(\"^\" + C + v + \"[^aeiouwxy]$\");\n\n  var porterStemmer = function porterStemmer(w) {\n    var   stem,\n      suffix,\n      firstch,\n      re,\n      re2,\n      re3,\n      re4;\n\n    if (w.length < 3) { return w; }\n\n    firstch = w.substr(0,1);\n    if (firstch == \"y\") {\n      w = firstch.toUpperCase() + w.substr(1);\n    }\n\n    // Step 1a\n    re = re_1a\n    re2 = re2_1a;\n\n    if (re.test(w)) { w = w.replace(re,\"$1$2\"); }\n    else if (re2.test(w)) { w = w.replace(re2,\"$1$2\"); }\n\n    // Step 1b\n    re = re_1b;\n    re2 = re2_1b;\n    if (re.test(w)) {\n      var fp = re.exec(w);\n      re = re_mgr0;\n      if (re.test(fp[1])) {\n        re = re_1b_2;\n        w = w.replace(re,\"\");\n      }\n    } else if (re2.test(w)) {\n      var fp = re2.exec(w);\n      stem = fp[1];\n      re2 = re_s_v;\n      if (re2.test(stem)) {\n        w = stem;\n        re2 = re2_1b_2;\n        re3 = re3_1b_2;\n        re4 = re4_1b_2;\n        if (re2.test(w)) {  w = w + \"e\"; }\n        else if (re3.test(w)) { re = re_1b_2; w = w.replace(re,\"\"); }\n        else if (re4.test(w)) { w = w + \"e\"; }\n      }\n    }\n\n    // Step 1c - replace suffix y or Y by i if preceded by a non-vowel which is not the first letter of the word (so cry -> cri, by -> by, say -> say)\n    re = re_1c;\n    if (re.test(w)) {\n      var fp = re.exec(w);\n      stem = fp[1];\n      w = stem + \"i\";\n    }\n\n    // Step 2\n    re = re_2;\n    if (re.test(w)) {\n      var fp = re.exec(w);\n      stem = fp[1];\n      suffix = fp[2];\n      re = re_mgr0;\n      if (re.test(stem)) {\n        w = stem + step2list[suffix];\n      }\n    }\n\n    // Step 3\n    re = re_3;\n    if (re.test(w)) {\n      var fp = re.exec(w);\n      stem = fp[1];\n      suffix = fp[2];\n      re = re_mgr0;\n      if (re.test(stem)) {\n        w = stem + step3list[suffix];\n      }\n    }\n\n    // Step 4\n    re = re_4;\n    re2 = re2_4;\n    if (re.test(w)) {\n      var fp = re.exec(w);\n      stem = fp[1];\n      re = re_mgr1;\n      if (re.test(stem)) {\n        w = stem;\n      }\n    } else if (re2.test(w)) {\n      var fp = re2.exec(w);\n      stem = fp[1] + fp[2];\n      re2 = re_mgr1;\n      if (re2.test(stem)) {\n        w = stem;\n      }\n    }\n\n    // Step 5\n    re = re_5;\n    if (re.test(w)) {\n      var fp = re.exec(w);\n      stem = fp[1];\n      re = re_mgr1;\n      re2 = re_meq1;\n      re3 = re3_5;\n      if (re.test(stem) || (re2.test(stem) && !(re3.test(stem)))) {\n        w = stem;\n      }\n    }\n\n    re = re_5_1;\n    re2 = re_mgr1;\n    if (re.test(w) && re2.test(w)) {\n      re = re_1b_2;\n      w = w.replace(re,\"\");\n    }\n\n    // and turn initial Y back to y\n\n    if (firstch == \"y\") {\n      w = firstch.toLowerCase() + w.substr(1);\n    }\n\n    return w;\n  };\n\n  return porterStemmer;\n})();\n\nlunr.Pipeline.registerFunction(lunr.stemmer, 'stemmer')\n/*!\n * lunr.stopWordFilter\n * Copyright (C) 2017 Oliver Nightingale\n */\n\n/**\n * lunr.generateStopWordFilter builds a stopWordFilter function from the provided\n * list of stop words.\n *\n * The built in lunr.stopWordFilter is built using this generator and can be used\n * to generate custom stopWordFilters for applications or non English languages.\n *\n * @module\n * @param {Array} token The token to pass through the filter\n * @returns {Function}\n * @see lunr.Pipeline\n * @see lunr.stopWordFilter\n */\nlunr.generateStopWordFilter = function (stopWords) {\n  var words = stopWords.reduce(function (memo, stopWord) {\n    memo[stopWord] = stopWord\n    return memo\n  }, {})\n\n  return function (token) {\n    if (token && words[token] !== token) return token\n  }\n}\n\n/**\n * lunr.stopWordFilter is an English language stop word list filter, any words\n * contained in the list will not be passed through the filter.\n *\n * This is intended to be used in the Pipeline. If the token does not pass the\n * filter then undefined will be returned.\n *\n * @module\n * @param {String} token The token to pass through the filter\n * @returns {String}\n * @see lunr.Pipeline\n */\nlunr.stopWordFilter = lunr.generateStopWordFilter([\n  'a',\n  'able',\n  'about',\n  'across',\n  'after',\n  'all',\n  'almost',\n  'also',\n  'am',\n  'among',\n  'an',\n  'and',\n  'any',\n  'are',\n  'as',\n  'at',\n  'be',\n  'because',\n  'been',\n  'but',\n  'by',\n  'can',\n  'cannot',\n  'could',\n  'dear',\n  'did',\n  'do',\n  'does',\n  'either',\n  'else',\n  'ever',\n  'every',\n  'for',\n  'from',\n  'get',\n  'got',\n  'had',\n  'has',\n  'have',\n  'he',\n  'her',\n  'hers',\n  'him',\n  'his',\n  'how',\n  'however',\n  'i',\n  'if',\n  'in',\n  'into',\n  'is',\n  'it',\n  'its',\n  'just',\n  'least',\n  'let',\n  'like',\n  'likely',\n  'may',\n  'me',\n  'might',\n  'most',\n  'must',\n  'my',\n  'neither',\n  'no',\n  'nor',\n  'not',\n  'of',\n  'off',\n  'often',\n  'on',\n  'only',\n  'or',\n  'other',\n  'our',\n  'own',\n  'rather',\n  'said',\n  'say',\n  'says',\n  'she',\n  'should',\n  'since',\n  'so',\n  'some',\n  'than',\n  'that',\n  'the',\n  'their',\n  'them',\n  'then',\n  'there',\n  'these',\n  'they',\n  'this',\n  'tis',\n  'to',\n  'too',\n  'twas',\n  'us',\n  'wants',\n  'was',\n  'we',\n  'were',\n  'what',\n  'when',\n  'where',\n  'which',\n  'while',\n  'who',\n  'whom',\n  'why',\n  'will',\n  'with',\n  'would',\n  'yet',\n  'you',\n  'your'\n])\n\nlunr.Pipeline.registerFunction(lunr.stopWordFilter, 'stopWordFilter')\n/*!\n * lunr.trimmer\n * Copyright (C) 2017 Oliver Nightingale\n */\n\n/**\n * lunr.trimmer is a pipeline function for trimming non word\n * characters from the begining and end of tokens before they\n * enter the index.\n *\n * This implementation may not work correctly for non latin\n * characters and should either be removed or adapted for use\n * with languages with non-latin characters.\n *\n * @module\n * @param {String} token The token to pass through the filter\n * @returns {String}\n * @see lunr.Pipeline\n */\nlunr.trimmer = function (token) {\n  return token.replace(/^\\W+/, '').replace(/\\W+$/, '')\n}\n\nlunr.Pipeline.registerFunction(lunr.trimmer, 'trimmer')\n/*!\n * lunr.stemmer\n * Copyright (C) 2017 Oliver Nightingale\n * Includes code from - http://tartarus.org/~martin/PorterStemmer/js.txt\n */\n\n/**\n * lunr.TokenStore is used for efficient storing and lookup of the reverse\n * index of token to document ref.\n *\n * @constructor\n */\nlunr.TokenStore = function () {\n  this.root = { docs: {} }\n  this.length = 0\n}\n\n/**\n * Loads a previously serialised token store\n *\n * @param {Object} serialisedData The serialised token store to load.\n * @returns {lunr.TokenStore}\n * @memberOf TokenStore\n */\nlunr.TokenStore.load = function (serialisedData) {\n  var store = new this\n\n  store.root = serialisedData.root\n  store.length = serialisedData.length\n\n  return store\n}\n\n/**\n * Adds a new token doc pair to the store.\n *\n * By default this function starts at the root of the current store, however\n * it can start at any node of any token store if required.\n *\n * @param {String} token The token to store the doc under\n * @param {Object} doc The doc to store against the token\n * @param {Object} root An optional node at which to start looking for the\n * correct place to enter the doc, by default the root of this lunr.TokenStore\n * is used.\n * @memberOf TokenStore\n */\nlunr.TokenStore.prototype.add = function (token, doc, root) {\n  var root = root || this.root,\n      key = token.charAt(0),\n      rest = token.slice(1)\n\n  if (!(key in root)) root[key] = {docs: {}}\n\n  if (rest.length === 0) {\n    root[key].docs[doc.ref] = doc\n    this.length += 1\n    return\n  } else {\n    return this.add(rest, doc, root[key])\n  }\n}\n\n/**\n * Checks whether this key is contained within this lunr.TokenStore.\n *\n * By default this function starts at the root of the current store, however\n * it can start at any node of any token store if required.\n *\n * @param {String} token The token to check for\n * @param {Object} root An optional node at which to start\n * @memberOf TokenStore\n */\nlunr.TokenStore.prototype.has = function (token) {\n  if (!token) return false\n\n  var node = this.root\n\n  for (var i = 0; i < token.length; i++) {\n    if (!node[token.charAt(i)]) return false\n\n    node = node[token.charAt(i)]\n  }\n\n  return true\n}\n\n/**\n * Retrieve a node from the token store for a given token.\n *\n * By default this function starts at the root of the current store, however\n * it can start at any node of any token store if required.\n *\n * @param {String} token The token to get the node for.\n * @param {Object} root An optional node at which to start.\n * @returns {Object}\n * @see TokenStore.prototype.get\n * @memberOf TokenStore\n */\nlunr.TokenStore.prototype.getNode = function (token) {\n  if (!token) return {}\n\n  var node = this.root\n\n  for (var i = 0; i < token.length; i++) {\n    if (!node[token.charAt(i)]) return {}\n\n    node = node[token.charAt(i)]\n  }\n\n  return node\n}\n\n/**\n * Retrieve the documents for a node for the given token.\n *\n * By default this function starts at the root of the current store, however\n * it can start at any node of any token store if required.\n *\n * @param {String} token The token to get the documents for.\n * @param {Object} root An optional node at which to start.\n * @returns {Object}\n * @memberOf TokenStore\n */\nlunr.TokenStore.prototype.get = function (token, root) {\n  return this.getNode(token, root).docs || {}\n}\n\nlunr.TokenStore.prototype.count = function (token, root) {\n  return Object.keys(this.get(token, root)).length\n}\n\n/**\n * Remove the document identified by ref from the token in the store.\n *\n * By default this function starts at the root of the current store, however\n * it can start at any node of any token store if required.\n *\n * @param {String} token The token to get the documents for.\n * @param {String} ref The ref of the document to remove from this token.\n * @param {Object} root An optional node at which to start.\n * @returns {Object}\n * @memberOf TokenStore\n */\nlunr.TokenStore.prototype.remove = function (token, ref) {\n  if (!token) return\n  var node = this.root\n\n  for (var i = 0; i < token.length; i++) {\n    if (!(token.charAt(i) in node)) return\n    node = node[token.charAt(i)]\n  }\n\n  delete node.docs[ref]\n}\n\n/**\n * Find all the possible suffixes of the passed token using tokens\n * currently in the store.\n *\n * @param {String} token The token to expand.\n * @returns {Array}\n * @memberOf TokenStore\n */\nlunr.TokenStore.prototype.expand = function (token, memo) {\n  var root = this.getNode(token),\n      docs = root.docs || {},\n      memo = memo || []\n\n  if (Object.keys(docs).length) memo.push(token)\n\n  Object.keys(root)\n    .forEach(function (key) {\n      if (key === 'docs') return\n\n      memo.concat(this.expand(token + key, memo))\n    }, this)\n\n  return memo\n}\n\n/**\n * Returns a representation of the token store ready for serialisation.\n *\n * @returns {Object}\n * @memberOf TokenStore\n */\nlunr.TokenStore.prototype.toJSON = function () {\n  return {\n    root: this.root,\n    length: this.length\n  }\n}\n\n  /**\n   * export the module via AMD, CommonJS or as a browser global\n   * Export code from https://github.com/umdjs/umd/blob/master/returnExports.js\n   */\n  ;(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n      // AMD. Register as an anonymous module.\n      define(factory)\n    } else if (typeof exports === 'object') {\n      /**\n       * Node. Does not work with strict CommonJS, but\n       * only CommonJS-like enviroments that support module.exports,\n       * like Node.\n       */\n      module.exports = factory()\n    } else {\n      // Browser globals (root is window)\n      root.lunr = factory()\n    }\n  }(this, function () {\n    /**\n     * Just return a value to define the module export.\n     * This example returns an object, but the module\n     * can return a function as the exported value.\n     */\n    return lunr\n  }))\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lunr/lunr.js\n// module id = 13\n// module chunks = 0","import ContetTypeListView from \"./content-type-list-view\";\nimport {Eventful} from '../mixins/eventful';\n\n/**\n * @class\n * @mixes Eventful\n */\nexport default class ContentTypeList {\n  constructor(state) {\n    // add event system\n    Object.assign(this, Eventful());\n\n    // add the view\n    this.view = new ContetTypeListView(state);\n    this.propagate(['row-selected', 'select'], this.view);\n  }\n\n  hide() {\n    this.view.hide();\n  }\n\n  show() {\n    this.view.show();\n  }\n\n  /**\n   *\n   * @param {ContentType[]} contentTypes\n   */\n  update(contentTypes) {\n    this.view.updateList(contentTypes);\n  }\n\n  getElement() {\n    return this.view.getElement();\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/content-type-list/content-type-list.js","import { curry } from \"../../../node_modules/h5p-sdk/src/scripts/utils/functional\";\nimport { setAttribute, getAttribute } from \"../../../node_modules/h5p-sdk/src/scripts/utils/elements\";\nimport { Eventful } from '../mixins/eventful';\n\n/**\n * @constant {string}\n */\nconst ATTRIBUTE_CONTENT_TYPE_ID = 'data-id';\n\n/**\n * @function\n */\nconst hide = setAttribute('aria-hidden', 'true');\n\n/**\n * @function\n */\nconst show = setAttribute('aria-hidden', 'false');\n\n/**\n * Propagates row selection trough the event system\n *\n * @param {Eventful} eventful\n * @param {HTMLElement} element\n *\n * @function\n * @return {HTMLElement}\n */\nconst relayClickEventAs = curry(function(type, eventful, element) {\n  element.addEventListener('click', event => {\n    eventful.fire(type, {\n      element: element,\n      id: getAttribute(ATTRIBUTE_CONTENT_TYPE_ID, element)\n    }, false);\n\n    event.preventDefault();\n  });\n\n  return element;\n});\n\n/**\n * @class\n * @mixes Eventful\n */\nexport default class ContentTypeListView {\n  constructor(state) {\n    this.state = state;\n\n    // add event system\n    Object.assign(this, Eventful());\n\n    // create root element\n    this.rootElement = document.createElement('ul');\n    this.rootElement.className = 'content-type-list';\n  }\n\n  /**\n   * Hides the root element\n   */\n  hide() {\n    hide(this.rootElement);\n  }\n\n  /**\n   * Shows the root element\n   */\n  show() {\n    show(this.rootElement);\n  }\n\n  /**\n   *\n   * @param {ContentType[]} contentTypes\n   */\n  updateList(contentTypes) {\n    if(this.rootElement){\n      while(this.rootElement.firstChild ){\n        this.rootElement.removeChild(this.rootElement.firstChild);\n      }\n    }\n\n    this.renderContentTypeList(contentTypes)\n      .forEach(this.rootElement.appendChild.bind(this.rootElement));\n  }\n\n  /**\n   * Applies create rows, and add to the list\n   *\n   * @param {ContentType[]} contentTypes\n   *\n   * @return {HTMLElement[]}\n   */\n  renderContentTypeList(contentTypes) {\n    return contentTypes\n      .map(this.renderContentTypeRow.bind(this))\n      .map(relayClickEventAs('row-selected', this))\n  }\n\n  /**\n   * Takes a Content Type configuration and creates a row dom\n   *\n   * @param {ContentType} contentType\n   *\n   * @return {HTMLElement}\n   */\n  renderContentTypeRow(contentType) {\n    // image\n    const image = document.createElement('img');\n    image.setAttribute('src', contentType.icon);\n\n    // button\n    const button = document.createElement('span');\n    button.className = \"button button-primary\";\n    button.innerHTML = \"Use\";\n    button.setAttribute(ATTRIBUTE_CONTENT_TYPE_ID, contentType.id);\n    relayClickEventAs('select', this, button);\n\n    // title\n    const title = document.createElement('div');\n    title.className = 'content-type-list-title';\n    title.innerHTML = contentType.title;\n\n    // description\n    const description = document.createElement('div');\n    description.className = 'content-type-list-description';\n    description.innerHTML = contentType.summary;\n\n    // list item\n    const row = document.createElement('li');\n    row.id = `content-type-${contentType.id}`;\n    row.setAttribute(ATTRIBUTE_CONTENT_TYPE_ID, contentType.id);\n    row.appendChild(image);\n    row.appendChild(button);\n    row.appendChild(title);\n    row.appendChild(description);\n\n    return row;\n  }\n\n  getElement() {\n    return this.rootElement;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/content-type-list/content-type-list-view.js","import ContetTypeDetailView from \"./content-type-detail-view\";\nimport HubServices from \"../hub-services\";\nimport { Eventful } from '../mixins/eventful';\n\n/**\n * @class\n * @mixes Eventful\n */\nexport default class ContentTypeDetail {\n  constructor(state) {\n    // add event system\n    Object.assign(this, Eventful());\n\n    // services\n    this.services = new HubServices({\n      apiRootUrl: state.apiRootUrl\n    });\n\n    // views\n    this.view = new ContetTypeDetailView(state);\n    this.view.on('install', this.install, this);\n\n    // propagate events\n    this.propagate(['close', 'select'], this.view);\n  }\n\n  /**\n   * Hides the detail view\n   */\n  hide() {\n    this.view.hide();\n  }\n\n  /**\n   * Shows the detail view\n   */\n  show() {\n    this.view.show();\n  }\n\n  /**\n   * Loads a Content Type description\n   *\n   * @param {string} id\n   *\n   * @return {Promise.<ContentType>}\n   */\n  loadById(id) {\n    this.services.contentType(id)\n      .then(this.update.bind(this))\n  }\n\n  /**\n   * Loads a Content Type description\n   *\n   * @param {string} id\n   *\n   * @return {Promise.<ContentType>}\n   */\n  install({ id }) {\n    return this.services.installContentType(id)\n      .then(contentType => console.debug('TODO, gui updates'))\n  }\n\n  /**\n   * Updates the view with the content type data\n   *\n   * @param {ContentType} contentType\n   */\n  update(contentType) {\n    this.view.setId(contentType.id);\n    this.view.setTitle(contentType.title);\n    this.view.setDescription(contentType.description);\n    this.view.setImage(contentType.icon);\n  }\n\n  /**\n   * Returns the root html element\n   *\n   * @return {HTMLElement}\n   */\n  getElement() {\n    return this.view.getElement();\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/content-type-detail/content-type-detail.js","import { setAttribute, getAttribute } from \"../../../node_modules/h5p-sdk/src/scripts/utils/elements\";\nimport { curry } from \"../../../node_modules/h5p-sdk/src/scripts/utils/functional\";\nimport { Eventful } from '../mixins/eventful';\nimport initPanel from \"../../../node_modules/h5p-sdk/src/scripts/components/panel\"\n\n/**\n * @constant {string}\n */\nconst ATTRIBUTE_CONTENT_TYPE_ID = 'data-id';\n\n/**\n * @function\n */\nconst hide = setAttribute('aria-hidden', 'true');\n\n/**\n * @function\n */\nconst show = setAttribute('aria-hidden', 'false');\n\n/**\n * Propagates row selection trough the event system\n *\n * @param {Eventful} eventful\n * @param {HTMLElement} element\n *\n * @function\n * @return {HTMLElement}\n */\nconst relayClickEventAs = curry(function(type, eventful, element) {\n  element.addEventListener('click', event => {\n    eventful.fire(type, {\n      element: element,\n      id: getAttribute(ATTRIBUTE_CONTENT_TYPE_ID, element)\n    })\n  });\n\n  return element;\n});\n\nexport default class ContentTypeDetailView {\n  constructor(state) {\n    // add event system\n    Object.assign(this, Eventful());\n\n    // image\n    this.imageElement = document.createElement('img');\n    this.imageElement.className = 'img-responsive';\n\n    // title\n    this.titleElement = document.createElement('h2');\n    this.titleElement.className = 'title';\n    this.titleElement.innerHTML = 'title';\n\n    // back button\n    const backButtonElement = document.createElement('div');\n    backButtonElement.className = 'back-button icon-arrow-thick';\n    relayClickEventAs('close', this, backButtonElement);\n\n    // detail\n    this.descriptioneElement = document.createElement('div');\n    this.descriptioneElement.className = 'description';\n    this.descriptioneElement.innerHTML = 'description';\n\n    // demo button\n    const demoButton = document.createElement('span');\n    demoButton.className = 'button';\n    demoButton.innerHTML = 'Content Demo';\n    relayClickEventAs('select', this, demoButton);\n\n    // use button\n    this.useButton = document.createElement('span');\n    this.useButton.className = 'button';\n    this.useButton.innerHTML = 'Use';\n    relayClickEventAs('select', this, this.useButton);\n\n    // install button\n    this.installButton = document.createElement('span');\n    this.installButton.className = 'button button-inverse';\n    this.installButton.innerHTML = 'Install';\n    relayClickEventAs('install', this, this.installButton);\n\n    // licence panel\n    const licencePanel = this.createPanel('The Licence Info', 'ipsum lorum', 'licence-panel');\n    const pluginsPanel = this.createPanel('Available plugins', 'ipsum lorum', 'plugins-panel');\n    const publisherPanel = this.createPanel('Publisher Info', 'ipsum lorum', 'publisher-panel');\n\n    // panel group\n    const panelGroupElement = document.createElement('div');\n    panelGroupElement.className = 'panel-group';\n    panelGroupElement.appendChild(licencePanel);\n    panelGroupElement.appendChild(pluginsPanel);\n    panelGroupElement.appendChild(publisherPanel);\n\n    // add root element\n    this.rootElement = document.createElement('div');\n    this.rootElement.className = 'content-type-detail';\n    this.rootElement.setAttribute('aria-hidden', 'true');\n    this.rootElement.appendChild(backButtonElement);\n    this.rootElement.appendChild(this.imageElement);\n    this.rootElement.appendChild(this.titleElement);\n    this.rootElement.appendChild(this.descriptioneElement);\n    this.rootElement.appendChild(demoButton);\n    this.rootElement.appendChild(this.useButton);\n    this.rootElement.appendChild(this.installButton);\n    this.rootElement.appendChild(panelGroupElement);\n  }\n\n  /**\n   * Creates a panel\n   *\n   * @param {string} title\n   * @param {string} body\n   * @param {string} bodyId\n   *\n   * @return {HTMLElement}\n   */\n  createPanel(title, body, bodyId) {\n    const headerEl = document.createElement('div');\n    headerEl.className = 'panel-header';\n    headerEl.setAttribute('aria-expanded', 'false');\n    headerEl.setAttribute('aria-controls', bodyId);\n    headerEl.innerHTML = title;\n\n    const bodyInnerEl = document.createElement('div');\n    bodyInnerEl.className = 'panel-body-inner';\n    bodyInnerEl.innerHTML = body;\n\n    const bodyEl = document.createElement('div');\n    bodyEl.className = 'panel-body';\n    bodyEl.id = bodyId;\n    bodyEl.setAttribute('aria-hidden', 'true');\n    bodyEl.appendChild(bodyInnerEl);\n\n    const panelEl = document.createElement('div');\n    panelEl.className = 'panel';\n    panelEl.appendChild(headerEl);\n    panelEl.appendChild(bodyEl);\n\n    initPanel(panelEl);\n\n    return panelEl;\n  }\n\n  /**\n   * Sets the image\n   *\n   * @param {string} src\n   */\n  setImage(src) {\n    this.imageElement.setAttribute('src', src);\n  }\n\n  /**\n   * Sets the title\n   *\n   * @param {string} id\n   */\n  setId(id) {\n    this.installButton.setAttribute(ATTRIBUTE_CONTENT_TYPE_ID, id);\n    this.useButton.setAttribute(ATTRIBUTE_CONTENT_TYPE_ID, id);\n  }\n\n  /**\n   * Sets the title\n   *\n   * @param {string} title\n   */\n  setTitle(title) {\n    this.titleElement.innerHTML = title;\n  }\n\n  /**\n   * Sets the long description\n   *\n   * @param {string} text\n   */\n  setDescription(text) {\n    this.descriptioneElement.innerHTML = text;\n  }\n\n  /**\n   * Hides the root element\n   */\n  hide() {\n    hide(this.rootElement);\n  }\n\n  /**\n   * Shows the root element\n   */\n  show() {\n    show(this.rootElement);\n  }\n\n  /**\n   * Returns the root html element\n   * @return {HTMLElement}\n   */\n  getElement() {\n    return this.rootElement;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/content-type-detail/content-type-detail-view.js","/**\n * @class\n */\nexport default class UploadSection {\n  getElement() {\n    const element = document.createElement('div');\n    element.innerHTML = \"TODO Upload\";\n    return element;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/upload-section/upload-section.js"],"sourceRoot":""}