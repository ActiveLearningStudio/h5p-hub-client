!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=24)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.EventDispatcher=function(){return{listeners:{},on:function(e,t,n){var i={listener:t,scope:n};return this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(i),this},trigger:function(e,t){return(this.listeners[e]||[]).every(function(e){return e.listener.call(e.scope||this,t)!==!1})},propagate:function(e,t,n){var i=this;e.forEach(function(e){return t.on(e,function(t){return i.trigger(n||e,t)})})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=t.curry=function(e){var t=e.length;return function n(){var i=Array.prototype.slice.call(arguments,0);return i.length>=t?e.apply(null,i):function(){var e=Array.prototype.slice.call(arguments,0);return n.apply(null,i.concat(e))}}},r=(t.compose=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})},t.forEach=i(function(e,t){t.forEach(e)}),t.map=i(function(e,t){return t.map(e)}),t.filter=i(function(e,t){return t.filter(e)})),o=(t.some=i(function(e,t){return t.some(e)}),t.contains=i(function(e,t){return t.indexOf(e)!=-1}));t.without=i(function(e,t){return r(function(t){return!o(t,e)},t)}),t.inverseBooleanString=function(e){return("true"!==e).toString()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleVisibility=t.show=t.hide=t.nodeListToArray=t.classListContains=t.removeChild=t.querySelectorAll=t.querySelector=t.appendChild=t.toggleAttribute=t.attributeEquals=t.hasAttribute=t.removeAttribute=t.setAttribute=t.getAttribute=void 0;var i=n(1),r=t.getAttribute=(0,i.curry)(function(e,t){return t.getAttribute(e)}),o=t.setAttribute=(0,i.curry)(function(e,t,n){return n.setAttribute(e,t)}),s=(t.removeAttribute=(0,i.curry)(function(e,t){return t.removeAttribute(e)}),t.hasAttribute=(0,i.curry)(function(e,t){return t.hasAttribute(e)}),t.attributeEquals=(0,i.curry)(function(e,t,n){return n.getAttribute(e)===t}),t.toggleAttribute=(0,i.curry)(function(e,t){var n=r(e,t);o(e,(0,i.inverseBooleanString)(n),t)}),t.appendChild=(0,i.curry)(function(e,t){return e.appendChild(t)}),t.querySelector=(0,i.curry)(function(e,t){return t.querySelector(e)}),t.querySelectorAll=(0,i.curry)(function(e,t){return t.querySelectorAll(e)}),t.removeChild=(0,i.curry)(function(e,t){return e.removeChild(t)}),t.classListContains=(0,i.curry)(function(e,t){return t.classList.contains(e)}),t.nodeListToArray=function(e){return Array.prototype.slice.call(e)},t.hide=o("aria-hidden","true")),a=t.show=o("aria-hidden","false");t.toggleVisibility=(0,i.curry)(function(e,t){return(e?a:s)(t)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.relayClickEventAs=void 0;var i=n(1);t.relayClickEventAs=(0,i.curry)(function(e,t,n){return n.addEventListener("click",function(i){t.trigger(e,{element:n,id:n.getAttribute("data-id")},!1),i.stopPropagation()}),n})},function(e,t,n){"use strict";function i(e){(0,r.initCollapsible)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=n(5)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initCollapsible=void 0;var i=n(2),r=(0,i.attributeEquals)("aria-expanded","true");t.initCollapsible=function(e){var t=e.querySelector("[aria-controls][aria-expanded]"),n=t.getAttribute("aria-controls"),o=e.querySelector("#"+n);new MutationObserver(function(){return(0,i.toggleVisibility)(r(t),o)}).observe(t,{attributes:!0,attributeOldValue:!0,attributeFilter:["aria-expanded"]}),t.addEventListener("click",function(){return(0,i.toggleAttribute)("aria-expanded",t)}),(0,i.toggleVisibility)(r(t),o)}},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgMjI1Ij4NCiAgPGRlZnM+DQogICAgPHN0eWxlPg0KICAgICAgLmNscy0xIHsNCiAgICAgIGZpbGw6IG5vbmU7DQogICAgICB9DQoNCiAgICAgIC5jbHMtMiB7DQogICAgICBmaWxsOiAjYzZjNmM3Ow0KICAgICAgfQ0KDQogICAgICAuY2xzLTMsIC5jbHMtNCB7DQogICAgICBmaWxsOiAjZmZmOw0KICAgICAgfQ0KDQogICAgICAuY2xzLTMgew0KICAgICAgb3BhY2l0eTogMC43Ow0KICAgICAgfQ0KICAgIDwvc3R5bGU+DQogIDwvZGVmcz4NCiAgPHRpdGxlPmNvbnRlbnQgdHlwZSBwbGFjZWhvbGRlcl8yPC90aXRsZT4NCiAgPGcgaWQ9IkxheWVyXzIiIGRhdGEtbmFtZT0iTGF5ZXIgMiI+DQogICAgPGcgaWQ9ImNvbnRlbnRfdHlwZV9wbGFjZWhvbGRlci0xX2NvcHkiIGRhdGEtbmFtZT0iY29udGVudCB0eXBlIHBsYWNlaG9sZGVyLTEgY29weSI+DQogICAgICA8cmVjdCBjbGFzcz0iY2xzLTEiIHdpZHRoPSI0MDAiIGhlaWdodD0iMjI1Ii8+DQogICAgICA8cmVjdCBjbGFzcz0iY2xzLTIiIHg9IjExMi41MSIgeT0iNDMuNDEiIHdpZHRoPSIxNzYuOTYiIGhlaWdodD0iMTM1LjQ1IiByeD0iMTAiIHJ5PSIxMCIvPg0KICAgICAgPGNpcmNsZSBjbGFzcz0iY2xzLTMiIGN4PSIxMzYuNjYiIGN5PSI2MS45OCIgcj0iNC44MSIvPg0KICAgICAgPGNpcmNsZSBjbGFzcz0iY2xzLTMiIGN4PSIxNTEuNDkiIGN5PSI2MS45OCIgcj0iNC44MSIvPg0KICAgICAgPGNpcmNsZSBjbGFzcz0iY2xzLTMiIGN4PSIxNjYuMSIgY3k9IjYxLjk4IiByPSI0LjgxIi8+DQogICAgICA8ZyBpZD0iX0dyb3VwXyIgZGF0YS1uYW1lPSImbHQ7R3JvdXAmZ3Q7Ij4NCiAgICAgICAgPGcgaWQ9Il9Hcm91cF8yIiBkYXRhLW5hbWU9IiZsdDtHcm91cCZndDsiPg0KICAgICAgICAgIDxwYXRoIGlkPSJfQ29tcG91bmRfUGF0aF8iIGRhdGEtbmFtZT0iJmx0O0NvbXBvdW5kIFBhdGgmZ3Q7IiBjbGFzcz0iY2xzLTQiIGQ9Ik0yNjMuMjgsOTUuMjFDMjYwLDkyLjA3LDI1NSw5MS41LDI0OC40Myw5MS41SDIyN3Y4SDE5OS41bC0yLjE3LDEwLjI0YTI1Ljg0LDI1Ljg0LDAsMCwxLDExLjQ4LTEuNjMsMTkuOTMsMTkuOTMsMCwwLDEsMTQuMzksNS41NywxOC4yNiwxOC4yNiwwLDAsMSw1LjUyLDEzLjYsMjMuMTEsMjMuMTEsMCwwLDEtMi44NCwxMS4wNSwxOC42NSwxOC42NSwwLDAsMS04LjA2LDcuNzksOSw5LDAsMCwxLTQuMTIsMS4zN0gyMzZ2LTIxaDEwLjQyYzcuMzYsMCwxMi44My0xLjYxLDE2LjQyLTVzNS4zOC03LjQ4LDUuMzgtMTMuNDRDMjY4LjIyLDEwMi4yOSwyNjYuNTcsOTguMzUsMjYzLjI4LDk1LjIxWm0tMTUsMTdjLTEuNDIsMS4yMi0zLjksMS4yNS03LjQxLDEuMjVIMjM2di0xNGg1LjYyYTkuNTcsOS41NywwLDAsMSw3LDIuOTMsNy4wNSw3LjA1LDAsMCwxLDEuODUsNC45MkE2LjMzLDYuMzMsMCwwLDEsMjQ4LjMxLDExMi4yNVoiLz4NCiAgICAgICAgICA8cGF0aCBpZD0iX1BhdGhfIiBkYXRhLW5hbWU9IiZsdDtQYXRoJmd0OyIgY2xhc3M9ImNscy00IiBkPSJNMjAyLjksMTE5LjExYTguMTIsOC4xMiwwLDAsMC03LjI4LDQuNTJsLTE2LTEuMjIsNy4yMi0zMC45MkgxNzR2MjJIMTUzdi0yMkgxMzZ2NTZoMTd2LTIxaDIxdjIxaDIwLjMxYy0yLjcyLDAtNS0xLjUzLTctM2ExOS4xOSwxOS4xOSwwLDAsMS00LjczLTQuODMsMjMuNTgsMjMuNTgsMCwwLDEtMy02LjZsMTYtMi4yNmE4LjExLDguMTEsMCwxLDAsNy4yNi0xMS43MloiLz4NCiAgICAgICAgPC9nPg0KICAgICAgPC9nPg0KICAgICAgPHJlY3QgY2xhc3M9ImNscy0zIiB4PSIxNzcuNjYiIHk9IjU3LjY2IiB3aWR0aD0iOTIuMjgiIGhlaWdodD0iOS4zOCIgcng9IjMuNSIgcnk9IjMuNSIvPg0KICAgIDwvZz4NCiAgPC9nPg0KPC9zdmc+DQo="},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(16),l=i(a),u=n(14),c=i(u),d=n(19),h=i(d),f=n(15),p=i(f),y=n(0),v=function(){function e(t){r(this,e),o(this,(0,y.EventDispatcher)());var n=this;this.services=new p.default({apiRootUrl:t.apiRootUrl}),this.contentTypeSection=new c.default(t,this.services),this.uploadSection=new h.default(t,this.services),this.view=new l.default(t),this.propagate(["select"],this.contentTypeSection),this.propagate(["upload"],this.uploadSection),this.on("select",this.setPanelTitle,this),this.on("select",this.view.closePanel,this.view),this.view.on("tab-change",this.view.setSectionType,this.view),this.view.on("panel-change",this.view.togglePanelOpen.bind(this.view),this.view),this.contentTypeSection.on("reload",function(){n.services.setup(),n.contentTypeSection.initContentTypeList()}),this.initTabPanel(t)}return s(e,[{key:"getContentType",value:function(e){return this.services.contentType(e)}},{key:"setPanelTitle",value:function(e){var t=this,n=e.id;this.getContentType(n).then(function(e){var n=e.title;return t.view.setTitle(n)})}},{key:"initTabPanel",value:function(e){var t=this,n=e.sectionId,i=void 0===n?"content-types":n,r=[{title:"Create Content",id:"content-types",content:this.contentTypeSection.getElement()},{title:"Upload",id:"upload",content:this.uploadSection.getElement()}];r.filter(function(e){return e.id===i}).forEach(function(e){return e.selected=!0}),r.forEach(function(e){return t.view.addTab(e)}),this.view.addBottomBorder(),this.view.initTabPanel()}},{key:"getElement",value:function(){return this.view.getElement()}}]),e}();t.default=v},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(2),l=n(1),u=n(0),c=n(4),d=i(c),h=n(21),f=i(h),p=n(3),y=n(6),v=i(y),b="data-id",m=300,g=function(e,t){return(t?a.show:a.hide)(e)},w=function(e){return"string"==typeof e&&0===e.length},E=(0,l.forEach)(a.hide),A=function(){function e(t){var n=this;r(this,e),o(this,(0,u.EventDispatcher)()),this.rootElement=this.createView(),this.buttonBar=this.rootElement.querySelector(".button-bar"),this.useButton=this.buttonBar.querySelector(".button-use"),this.installButton=this.buttonBar.querySelector(".button-install"),this.buttons=this.buttonBar.querySelectorAll(".button"),this.image=this.rootElement.querySelector(".content-type-image"),this.title=this.rootElement.querySelector(".text-details .title"),this.owner=this.rootElement.querySelector(".owner"),this.description=this.rootElement.querySelector(".text-details .small"),this.demoButton=this.rootElement.querySelector(".demo-button"),this.carousel=this.rootElement.querySelector(".carousel"),this.carouselList=this.carousel.querySelector("ul"),this.licencePanel=this.rootElement.querySelector(".licence-panel"),this.installMessage=this.rootElement.querySelector(".install-message"),this.installMessage.querySelector(".message-close").addEventListener("click",function(){return(0,a.hide)(n.installMessage)}),(0,d.default)(this.licencePanel),(0,f.default)(this.carousel),(0,p.relayClickEventAs)("close",this,this.rootElement.querySelector(".back-button")),(0,p.relayClickEventAs)("select",this,this.useButton),(0,p.relayClickEventAs)("install",this,this.installButton)}return s(e,[{key:"createView",value:function(){var e=document.createElement("div");return e.className="content-type-detail",e.setAttribute("aria-hidden","true"),e.innerHTML='\n      <div class="back-button icon-arrow-thick"></div>\n      <div class="container">\n        <div class="image-wrapper"><img class="img-responsive content-type-image" src="'+v.default+'"></div>\n        <div class="text-details">\n          <h2 class="title"></h2>\n          <div class="owner"></div>\n          <p class="small"></p>\n          <a class="button demo-button" target="_blank" aria-hidden="false" href="#">Content Demo</a>\n        </div>\n      </div>\n      <div class="carousel" role="region" data-size="5">\n        <span class="carousel-button previous" aria-hidden="true" disabled><span class="icon-arrow-thick"></span></span>\n        <span class="carousel-button next" aria-hidden="true" disabled><span class="icon-arrow-thick"></span></span>\n        <nav class="scroller">\n          <ul></ul>\n        </nav>\n      </div>\n      <hr />\n      <div class="install-message message dismissible simple info" aria-hidden="true">\n        <div class="message-close icon-close"></div>\n        <h3></h3>\n      </div>\n      <div class="button-bar">\n        <span class="button button-primary button-use" aria-hidden="false" data-id="">Use</span>\n        <span class="button button-inverse-primary button-install" aria-hidden="true" data-id=""><span class="icon-arrow-thick"></span>Install</span>\n        <span class="button button-inverse-primary button-installing" aria-hidden="true"><span class="icon-loading-search icon-spin"></span>Installing</span>\n      </div>\n      <div class="panel-group">\n        <div class="panel licence-panel" aria-hidden="true">\n          <div class="panel-header" aria-expanded="false" aria-controls="licence-panel"><span class="icon-accordion-arrow"></span> The Licence Info</div>\n          <div class="panel-body" id="licence-panel" aria-hidden="true">\n            <div class="panel-body-inner"></div>\n          </div>\n        </div>\n      </div>',e}},{key:"setInstallMessage",value:function(e){var t=e.success,n=void 0===t||t,i=e.message;this.installMessage.querySelector("h3").innerText=i,this.installMessage.className="install-message dismissible message simple "+(n?"info":"error"),(0,a.show)(this.installMessage)}},{key:"removeAllImagesInCarousel",value:function(){this.carouselList.querySelectorAll("li").forEach((0,a.removeChild)(this.carouselList)),this.carousel.querySelectorAll(".carousel-lightbox").forEach((0,a.removeChild)(this.carousel))}},{key:"addImageToCarousel",value:function(e){var t=document.createElement("div");t.id="lightbox-"+this.carouselList.childElementCount,t.className="carousel-lightbox",t.setAttribute("aria-hidden","true"),t.innerHTML='<img class="img-responsive" src="'+e.url+'" alt="'+e.alt+'">',this.carousel.appendChild(t);var n=document.createElement("li");n.className="slide",n.innerHTML='<img src="'+e.url+'" alt="'+e.alt+'" class="img-responsive" aria-controls="'+t.id+'" />',this.carouselList.appendChild(n)}},{key:"reset",value:function(){(0,a.hide)(this.installMessage)}},{key:"setImage",value:function(e){this.image.setAttribute("src",e||v.default)}},{key:"setId",value:function(e){this.installButton.setAttribute(b,e),this.useButton.setAttribute(b,e)}},{key:"setTitle",value:function(e){this.title.innerHTML=""+e}},{key:"setDescription",value:function(e){var t=this;e.length>m?(this.description.innerHTML=this.ellipsis(m,e)+'<span class="read-more link">Read more</span>',this.description.querySelector(".read-more, .read-less").addEventListener("click",function(){return t.toggleDescriptionExpanded(e)}),this.descriptionExpanded=!1):this.description.innerText=e}},{key:"toggleDescriptionExpanded",value:function(e){var t=this;this.descriptionExpanded=!this.descriptionExpanded,this.descriptionExpanded?this.description.innerHTML=e+'<span class="read-less link">Read less</span>':this.description.innerHTML=this.ellipsis(m,e)+'<span class="read-more link">Read more</span>',this.description.querySelector(".read-more, .read-less").addEventListener("click",function(){return t.toggleDescriptionExpanded(e)})}},{key:"ellipsis",value:function(e,t){return t.substr(0,e)+"..."}},{key:"setLicence",value:function(e){e?(this.licencePanel.querySelector(".panel-body-inner").innerText=e,(0,a.show)(this.licencePanel)):(0,a.hide)(this.licencePanel)}},{key:"setOwner",value:function(e){this.owner.innerHTML=e?"By "+e:""}},{key:"setExample",value:function(e){this.demoButton.setAttribute("href",e||"#"),g(this.demoButton,!w(e))}},{key:"setIsInstalled",value:function(e){this.showButtonBySelector(e?".button-use":".button-install")}},{key:"showButtonBySelector",value:function(e){var t=this.buttonBar.querySelector(e);t&&(E(this.buttons),(0,a.show)(t))}},{key:"hide",value:function(){(0,a.hide)(this.rootElement)}},{key:"show",value:function(){(0,a.show)(this.rootElement)}},{key:"getElement",value:function(){return this.rootElement}}]),e}();t.default=A},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(9),l=i(a),u=n(0),c=function(){function e(t,n){r(this,e),o(this,(0,u.EventDispatcher)()),this.services=n,this.view=new l.default(t),this.view.on("install",this.install,this),this.propagate(["close","select"],this.view)}return s(e,[{key:"hide",value:function(){this.view.hide()}},{key:"show",value:function(){this.view.show()}},{key:"loadById",value:function(e){this.services.contentType(e).then(this.update.bind(this))}},{key:"install",value:function(e){var t=this,n=e.id;return this.view.showButtonBySelector(".button-installing"),this.services.contentType(n).then(function(e){return t.services.installContentType(e.machineName)}).then(function(e){t.view.setIsInstalled(!0),t.view.showButtonBySelector(".button-get"),t.view.setInstallMessage({message:e.title+" successfully installed!"})}).catch(function(e){t.view.showButtonBySelector(".button-install");var i=e.errorCode?e:{success:!1,errorCode:"RESPONSE_FAILED",message:n+" could not be installed! Contact your administrator."};t.view.setInstallMessage(i),console.error("Installation error",e)})}},{key:"update",value:function(e){this.view.reset(),this.view.setId(e.machineName),this.view.setTitle(e.title),this.view.setDescription(e.description),this.view.setImage(e.icon),this.view.setExample(e.example),this.view.setOwner(e.owner),this.view.setIsInstalled(e.installed),this.view.setLicence(e.license),this.view.removeAllImagesInCarousel(),e.screenshots.forEach(this.view.addImageToCarousel,this.view)}},{key:"getElement",value:function(){return this.view.getElement()}}]),e}();t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=(n(1),n(2)),l=n(0),u=n(3),c=n(6),d=i(c),h=(0,a.setAttribute)("aria-hidden","true"),f=(0,a.setAttribute)("aria-hidden","false"),p=function(){function e(t){r(this,e),this.state=t,o(this,(0,l.EventDispatcher)()),this.rootElement=document.createElement("ul"),this.rootElement.className="content-type-list"}return s(e,[{key:"hide",value:function(){h(this.rootElement)}},{key:"show",value:function(){f(this.rootElement)}},{key:"removeAllRows",value:function(){for(;this.rootElement.hasChildNodes();)this.rootElement.removeChild(this.rootElement.lastChild)}},{key:"addRow",value:function(e){var t=this.createContentTypeRow(e,this);(0,u.relayClickEventAs)("row-selected",this,t),this.rootElement.appendChild(t)}},{key:"createContentTypeRow",value:function(e,t){var n=document.createElement("li");n.id="content-type-"+e.machineName,n.setAttribute("data-id",e.machineName);var i={text:"Use",cls:"button-primary",icon:""},r={text:"Get",cls:"button-inverse-primary button-install",icon:"icon-arrow-thick"},o=e.installed?i:r,s=e.title||e.machineName,a=e.summary||"",l=e.icon||d.default;n.innerHTML='\n      <img class="img-responsive" src="'+l+'">\n      <span class="button '+o.cls+'" data-id="'+e.machineName+'" tabindex="0"><span class="'+o.icon+'"></span>'+o.text+"</span>\n      <h4>"+s+'</h4>\n      <div class="description">'+a+"</div>\n   ";var c=n.querySelector(".button-primary");return c&&(0,u.relayClickEventAs)("select",t,c),n}},{key:"getElement",value:function(){return this.rootElement}}]),e}();t.default=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(11),l=i(a),u=n(0),c=function(){function e(t){r(this,e),o(this,(0,u.EventDispatcher)()),this.view=new l.default(t),this.propagate(["row-selected","select"],this.view)}return s(e,[{key:"hide",value:function(){this.view.hide()}},{key:"show",value:function(){this.view.show()}},{key:"update",value:function(e){this.view.removeAllRows(),e.forEach(this.view.addRow,this.view),this.trigger("update-content-type-list",{})}},{key:"getElement",value:function(){return this.view.getElement()}}]),e}();t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(17),l=i(a),u=n(2),c=n(1),d=(n(3),n(22)),h=i(d),f=n(0),p=(0,c.forEach)((0,u.removeAttribute)("aria-selected")),y=function(){function e(t){var n=this;r(this,e),o(this,(0,f.EventDispatcher)()),this.rootElement=this.createElement(t),this.menubar=this.rootElement.querySelector(".navbar-nav"),this.inputField=this.rootElement.querySelector('[role="search"] input'),this.displaySelected=this.rootElement.querySelector(".navbar-toggler-selected");var i=this.rootElement.querySelector('[role="search"] .input-group-addon');this.inputField.addEventListener("keyup",function(e){n.trigger("search",{element:e.target,query:e.target.value,keyCode:e.which||e.keyCode})}),i.addEventListener("click",function(e){var t=e.target.parentElement.querySelector("#hub-search-bar");n.trigger("search",{element:t,query:t.value,keyCode:13}),t.focus()})}return s(e,[{key:"createElement",value:function(e){var t="content-type-filter",n=document.createElement("div");return n.className="content-type-section-view",n.innerHTML='\n      <div class="menu-group">\n        <nav  role="menubar" class="navbar">\n          <div class="navbar-header">\n             <span class="navbar-toggler navbar-toggler-right" aria-controls="'+t+'" aria-expanded="false">\n               <span class="navbar-toggler-selected"></span>\n               <span class="icon-accordion-arrow"></span>\n             </span>\n            <span class="navbar-brand">Browse content types</span>\n          </div>\n\n          <ul id="'+t+'" class="navbar-nav" aria-hidden="true"></ul>\n        </nav>\n\n        <div class="input-group" role="search">\n          <input id="hub-search-bar" class="form-control form-control-rounded" type="text" placeholder="Search for Content Types" />\n          <div class="input-group-addon icon-search"></div>\n        </div>\n      </div>',n}},{key:"displayMessage",value:function(e){var t=this;e.action="Reload";var n=new l.default(e),i=n.getElement();n.on("action-clicked",function(){t.rootElement.classList.remove("error"),i.parentNode.removeChild(i),t.trigger("reload")}),this.rootElement.classList.add("error"),this.rootElement.appendChild(n.getElement())}},{key:"addMenuItem",value:function(e){var t=this,n=e.title,i=e.id,r=e.selected,o=e.eventName,s=document.createElement("li");return s.setAttribute("role","menuitem"),s.setAttribute("data-id",i),s.innerText=n,r&&(s.setAttribute("aria-selected","true"),this.displaySelected.innerText=n),s.addEventListener("click",function(e){t.trigger("menu-selected",{element:e.target,choice:o})}),this.menubar.appendChild(s),s}},{key:"clearInputField",value:function(){this.inputField.value=""}},{key:"setDisplaySelected",value:function(e){this.displaySelected.innerText=e}},{key:"selectMenuItemById",value:function(e){var t=this.menubar.querySelectorAll('[role="menuitem"]'),n=this.menubar.querySelector('[role="menuitem"][data-id="'+e+'"]');n&&(p(t),n.setAttribute("aria-selected","true"),this.trigger("menu-selected",{element:n,id:n.getAttribute("data-id")}))}},{key:"initMenu",value:function(){var e=document.createElement("span");e.className="menuitem-underline",this.menubar.appendChild(e),(0,h.default)(this.rootElement)}},{key:"getElement",value:function(){return this.rootElement}}]),e}();t.default=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(13),l=i(a),u=n(18),c=i(u),d=n(12),h=i(d),f=n(10),p=i(f),y=n(0),v={ALL:{id:"filter-all",title:"All",eventName:"all"},MY_CONTENT_TYPES:{id:"filter-my-content-types",title:"My Content Types",eventName:"my-content-types",selected:!0},MOST_POPULAR:{id:"filter-most-popular",title:"Most Popular",eventName:"most-popular",filterProperty:"popularity"}},b=function(){function e(t,n){r(this,e),o(this,(0,y.EventDispatcher)()),this.typeAheadEnabled=!0,this.view=new l.default(t),this.searchService=new c.default(n),this.contentTypeList=new h.default,this.contentTypeDetail=new p.default({},n);for(var i in v)v.hasOwnProperty(i)&&this.view.addMenuItem(v[i]);this.view.initMenu();var s=document.createElement("div");s.classList.add("content-type-section"),this.rootElement=s,this.rootElement.appendChild(this.contentTypeList.getElement()),this.rootElement.appendChild(this.contentTypeDetail.getElement()),this.view.getElement().appendChild(this.rootElement),this.propagate(["select","update-content-type-list"],this.contentTypeList),this.propagate(["select"],this.contentTypeDetail),this.propagate(["reload"],this.view),this.view.on("search",this.search,this),this.view.on("search",this.view.selectMenuItemById.bind(this.view,v.ALL.id)),this.view.on("search",this.resetMenuOnEnter,this),this.view.on("menu-selected",this.applySearchFilter,this),this.view.on("menu-selected",this.clearInputField,this),this.view.on("menu-selected",this.updateDisplaySelected,this),this.contentTypeList.on("row-selected",this.showDetailView,this),this.contentTypeDetail.on("close",this.closeDetailView,this),this.contentTypeDetail.on("select",this.closeDetailView,this),this.initContentTypeList()}return s(e,[{key:"initContentTypeList",value:function(){var e=this;this.searchService.search("").then(function(t){return e.contentTypeList.update(t)}).catch(function(t){return e.handleError(t)})}},{key:"handleError",value:function(e){this.view.displayMessage({type:"error",title:"Not able to communicate with hub.",content:"Error occured. Please try again."})}},{key:"search",value:function(e){var t=this,n=e.query,i=e.keyCode;(this.typeAheadEnabled||13===i)&&this.searchService.search(n).then(function(e){return t.contentTypeList.update(e)})}},{key:"updateDisplaySelected",value:function(e){this.view.setDisplaySelected(e.element.innerText)}},{key:"resetMenuOnEnter",value:function(e){13===e.keyCode&&this.closeDetailView()}},{key:"applySearchFilter",value:function(e){var t=this;switch(e.choice){case v.MOST_POPULAR.eventName:this.searchService.filter(v.MOST_POPULAR.filterProperty).then(function(e){t.contentTypeList.update(e)})}}},{key:"clearInputField",value:function(e){e.id!==v.ALL.id&&this.view.clearInputField()}},{key:"showDetailView",value:function(e){var t=e.id;this.contentTypeList.hide(),this.contentTypeDetail.loadById(t),this.contentTypeDetail.show(),this.typeAheadEnabled=!1}},{key:"closeDetailView",value:function(){this.contentTypeDetail.hide(),this.contentTypeList.show(),this.typeAheadEnabled=!0}},{key:"getElement",value:function(){return this.view.getElement()}}]),e}();t.default=b},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(20);var o=function(){function e(t){var n=t.apiRootUrl;i(this,e),this.apiRootUrl=n,this.setup()}return r(e,[{key:"setup",value:function(){this.cachedContentTypes=fetch(this.apiRootUrl+"content-type-cache",{method:"GET",credentials:"include"}).then(function(e){return e.json()}).then(this.isValid).then(function(e){return e.libraries})}},{key:"isValid",value:function(e){return e.messageCode?Promise.reject(e):Promise.resolve(e)}},{key:"contentTypes",value:function(){return this.cachedContentTypes}},{key:"contentType",value:function(e){return this.cachedContentTypes.then(function(t){return t.filter(function(t){return t.machineName===e})[0]})}},{key:"installContentType",value:function(e){return fetch(ns.getAjaxUrl("library-install",{id:e}),{method:"POST",credentials:"include",body:""}).then(function(e){return e.json()})}},{key:"uploadContent",value:function(e){return fetch(this.apiRootUrl+"library-upload",{method:"POST",credentials:"include",body:e}).then(function(e){return e.json()})}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(4),l=i(a),u=n(23),c=i(u),d=(n(1),n(2)),h=n(0),f=n(3),p="data-id",y=(0,d.hasAttribute)("open"),v=function(){function e(t){r(this,e),o(this,(0,h.EventDispatcher)()),this.renderTabPanel(t),this.renderPanel(t)}return s(e,[{key:"closePanel",value:function(){this.title.setAttribute("aria-expanded","false")}},{key:"setTitle",value:function(e){this.title.innerHTML=e}},{key:"renderPanel",value:function(e){var t=e.title,n=void 0===t?"":t,i=e.sectionId,r=void 0===i?"content-types":i,o=e.expanded,s=void 0!==o&&o;this.title=document.createElement("div"),this.title.className+="panel-header icon-hub-icon",this.title.setAttribute("aria-expanded",(!!s).toString()),this.title.setAttribute("aria-controls","panel-body-"+r),this.title.innerHTML=n,(0,f.relayClickEventAs)("panel-change",this,this.title),this.body=document.createElement("div"),this.body.className+="panel-body",this.body.setAttribute("aria-hidden",(!s).toString()),this.body.id="panel-body-"+r,this.body.appendChild(this.tabContainerElement),this.panel=document.createElement("div"),this.panel.className+="panel h5p-section-"+r,s&&this.panel.setAttribute("open",""),this.panel.appendChild(this.title),this.panel.appendChild(this.body),this.rootElement=document.createElement("div"),this.rootElement.className+="h5p-hub h5p-sdk",this.rootElement.appendChild(this.panel),(0,l.default)(this.rootElement)}},{key:"togglePanelOpen",value:function(){var e=this.panel;y(e)?e.removeAttribute("open"):(e.setAttribute("open",""),setTimeout(function(){e.querySelector("#hub-search-bar").focus()},20))}},{key:"renderTabPanel",value:function(e){this.tablist=document.createElement("ul"),this.tablist.className+="tablist",this.tablist.setAttribute("role","tablist"),this.tabListWrapper=document.createElement("nav"),this.tabListWrapper.appendChild(this.tablist),this.tabContainerElement=document.createElement("div"),this.tabContainerElement.className+="tab-panel",this.tabContainerElement.appendChild(this.tabListWrapper)}},{key:"addTab",value:function(e){var t=e.title,n=e.id,i=e.content,r=e.selected,o=void 0!==r&&r,s="tab-"+n,a="tab-panel-"+n,l=document.createElement("li");l.className+="tab",l.id=s,l.setAttribute("aria-controls",a),l.setAttribute("aria-selected",o.toString()),l.setAttribute(p,n),l.setAttribute("role","tab"),l.innerHTML=t,(0,f.relayClickEventAs)("tab-change",this,l);var u=document.createElement("div");u.id=a,u.className+="tabpanel",u.setAttribute("aria-lablledby",s),u.setAttribute("aria-hidden",(!o).toString()),u.setAttribute("role","tabpanel"),u.appendChild(i),this.tablist.appendChild(l),this.tabContainerElement.appendChild(u)}},{key:"addBottomBorder",value:function(){this.tablist.appendChild(document.createElement("span"))}},{key:"initTabPanel",value:function(){(0,c.default)(this.tabContainerElement)}},{key:"setSectionType",value:function(e){var t=e.id;this.panel.className="h5p-section-"+t+" panel"}},{key:"getElement",value:function(){return this.rootElement}}]),e}();t.default=v},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),a=n(3),l=function(){function e(t){i(this,e),r(this,(0,s.EventDispatcher)()),this.rootElement=this.createElement(t)}return o(e,[{key:"createElement",value:function(e){var t=document.createElement("div");if(t.className="message "+e.type+(e.dismissible?" dismissible":""),e.dismissible){var n=document.createElement("div");n.className="close",t.appendChild(n),(0,a.relayClickEventAs)("close",this,n)}var i=document.createElement("div");if(i.className="message-content",i.innerHTML="<h2>"+e.title+"</h2><p>"+e.content+"</p>",t.appendChild(i),void 0!==e.action){var r=document.createElement("button");r.className="button",r.innerHTML=e.action,t.appendChild(r),(0,a.relayClickEventAs)("action-clicked",this,r)}return t}},{key:"getElement",value:function(){return this.rootElement}}]),e}();t.default=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=function(){function e(t){i(this,e),this.services=t}return r(e,[{key:"search",value:function(e){return this.services.contentTypes().then(a(e))}},{key:"filter",value:function(e){return this.services.contentTypes().then(function(t){return t.sort(function(t,n){return t.hasOwnProperty(e)?n.hasOwnProperty(e)?t[e]>n[e]?1:t[e]<n[e]?-1:0:-1:1})})}}]),e}();t.default=s;var a=(0,o.curry)(function(e,t){return""==e?t:t.map(function(t){return{contentType:t,score:u(e,t)}}).filter(function(e){return e.score>0}).sort(l).map(function(e){return e.contentType})}),l=function(e,t){return!e.contentType.installed&&t.contentType.installed?1:e.contentType.installed&&!t.contentType.installed?-1:t.score!==e.score?t.score-e.score:t.contentType.popularity-e.contentType.popularity},u=function(e,t){var n=e.split(" ").filter(function(e){return""!==e}),i=n.map(function(e){return c(e,t)});return i.indexOf(0)>-1?0:i.reduce(function(e,t){return e+t},0)},c=function(e,t){return e=e.trim(),d(e,t.title)?100:d(e,t.summary)?5:d(e,t.description)?5:h(e,t.keywords)?5:0},d=function(e,t){return void 0!==t&&t.toLowerCase().indexOf(e.toLowerCase())!==-1},h=function(e,t){return void 0!==t&&""!==e&&t.some(function(t){return d(e,t)})}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),a=function(){function e(t,n){var o=this;i(this,e);var a=this;r(this,(0,s.EventDispatcher)()),this.services=n;var l=document.createElement("input");l.setAttribute("type","file");var u=document.createElement("button");u.textContent="Use",u.addEventListener("click",function(){var e=new FormData;e.append("h5p",l.files[0]),o.services.uploadContent(e).then(function(e){a.trigger("upload",e)})});var c=document.createElement("div");c.appendChild(l),c.appendChild(u),this.rootElement=c}return o(e,[{key:"getElement",value:function(){return this.rootElement}}]),e}();t.default=a},function(e,t,n){"use strict";!function(e){function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function i(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return b.iterable&&(t[Symbol.iterator]=function(){return t}),t}function r(e){this.map={},e instanceof r?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function s(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function a(e){var t=new FileReader,n=s(t);return t.readAsArrayBuffer(e),n}function l(e){var t=new FileReader,n=s(t);return t.readAsText(e),n}function u(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(b.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(b.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(b.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(b.arrayBuffer&&b.blob&&g(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!b.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(u(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(e){var t=e.toUpperCase();return E.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var n=t.body;if(e instanceof f){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new r(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new r(t.headers)),this.method=h(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}}),t}function y(e){var t=new r;return e.replace(/\r?\n[\t ]+/," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}}),t}function v(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new r(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var b={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(b.arrayBuffer)var m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&m.indexOf(Object.prototype.toString.call(e))>-1};r.prototype.append=function(e,i){e=t(e),i=n(i);var r=this.map[e];this.map[e]=r?r+","+i:i},r.prototype.delete=function(e){delete this.map[t(e)]},r.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},r.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},r.prototype.set=function(e,i){this.map[t(e)]=n(i)},r.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},r.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),i(e)},r.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),i(e)},r.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),i(e)},b.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},d.call(f.prototype),d.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var A=[301,302,303,307,308];v.redirect=function(e,t){if(A.indexOf(t)===-1)throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=r,e.Request=f,e.Response=v,e.fetch=function(e,t){return new Promise(function(n,i){var r=new f(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:y(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL"),n(new v("response"in o?o.response:o.responseText,e))},o.onerror=function(){i(new TypeError("Network request failed"))},o.ontimeout=function(){i(new TypeError("Network request failed"))},o.open(r.method,r.url,!0),"include"===r.credentials&&(o.withCredentials=!0),"responseType"in o&&b.blob&&(o.responseType="blob"),r.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send(void 0===r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:void 0)},function(e,t,n){"use strict";function i(e){var t=e.querySelector(".next"),n=e.querySelector(".previous"),i={displayCount:e.getAttribute(a)||5,position:0};return t.addEventListener("click",p(e,i,t,function(e){return e.position--})),n.addEventListener("click",p(e,i,n,function(e){return e.position++})),e.querySelectorAll("[aria-controls]").forEach(y(e)),new MutationObserver((0,s.forEach)(v(e,i))).observe(e,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:[a]}),f(e,i),e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=i;var o=n(2),s=n(1),a="data-size",l=(0,o.setAttribute)("disabled",""),u=(0,o.removeAttribute)("disabled"),c=function(e,t){return(t?u:l)(e)},d=(0,s.curry)(function(e,t){return(0,o.setAttribute)("aria-hidden",e.toString(),t)}),h=(0,o.hasAttribute)("disabled"),f=function(e,t){var n=e.querySelector(".previous"),i=e.querySelector(".next"),r=e.querySelector("ul"),o=r.childElementCount;r.style.width=100/t.displayCount*o+"%",r.style.marginLeft=t.position*(100/t.displayCount)+"%",e.querySelectorAll("li").forEach(function(e){return e.style.width=100/o+"%"}),[n,i].forEach(d(t.displayCount>=o)),c(i,t.position>t.displayCount-o),c(n,t.position<0)},p=(0,s.curry)(function(e,t,n,i,r){h(n)||(i(t),f(e,t))}),y=(0,s.curry)(function(e,t){var n=t.getAttribute("aria-controls"),i=e.querySelector("#"+n);i.addEventListener("click",function(e){return i.setAttribute("aria-hidden","true")}),t.addEventListener("click",function(e){return i.setAttribute("aria-hidden","false")})}),v=(0,s.curry)(function(e,t,n){"childList"===n.type&&(0,o.nodeListToArray)(n.addedNodes).filter((0,o.classListContains)("slide")).map((0,o.querySelector)("img")).forEach(y(e)),f(e,r(t,{displayCount:e.getAttribute(a)||5,position:0}))})},function(e,t,n){"use strict";function i(e){var t=e.querySelectorAll('[role="menuitem"]'),n=e.querySelector("[aria-controls][aria-expanded]");t.forEach(function(e){e.addEventListener("click",function(e){a(t),e.target.setAttribute("aria-selected","true"),l(n)})}),(0,s.initCollapsible)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=n(2),o=n(1),s=n(5),a=(0,o.forEach)((0,r.setAttribute)("aria-selected","false")),l=(0,r.setAttribute)("aria-expanded","false")},function(e,t,n){"use strict";function i(e){var t=e.querySelectorAll('[role="tab"]'),n=e.querySelectorAll('[role="tabpanel"]');t.forEach(function(i){i.addEventListener("click",function(i){l(t),i.target.setAttribute("aria-selected","true"),s(n);var r=i.target.getAttribute("aria-controls");a(e.querySelector("#"+r))})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=n(2),o=n(1),s=(0,o.forEach)((0,r.setAttribute)("aria-hidden","true")),a=(0,r.setAttribute)("aria-hidden","false"),l=(0,o.forEach)((0,r.setAttribute)("aria-selected","false"))},function(e,t,n){"use strict";n(8),H5P=H5P||{},H5P.HubClient=n(7).default}]);